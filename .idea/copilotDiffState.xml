<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/equipments/presentation/equipment/ClientEquipment.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/equipments/presentation/equipment/ClientEquipment.kt" />
              <option name="originalContent" value="package pe.edu.upc.polarnet.features.client.equipments.presentation&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel&#10;import pe.edu.upc.polarnet.core.ui.theme.polarNetColors&#10;import pe.edu.upc.polarnet.features.client.equipments.presentation.equipment.ClientEquipmentCard&#10;&#10;@Composable&#10;fun ClientEquipmentsScreen(&#10;    clientId: Long,&#10;    viewModel: ClientEquipmentViewModel = hiltViewModel(),&#10;    onTapEquipmentCard: (Long) -&gt; Unit&#10;) {&#10;    val equipments by viewModel.clientEquipments.collectAsState()&#10;    val colors = MaterialTheme.polarNetColors&#10;&#10;    // Recargar equipos cada vez que la pantalla se muestra&#10;    LaunchedEffect(Unit) {&#10;        android.util.Log.d(&quot;ClientEquipments&quot;, &quot;Pantalla visible - Recargando equipos del cliente: $clientId&quot;)&#10;        viewModel.loadClientEquipments(clientId)&#10;    }&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(MaterialTheme.colorScheme.background)&#10;    ) {&#10;        // Header con gradiente&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(&#10;                    Brush.horizontalGradient(&#10;                        colors = listOf(&#10;                            colors.gradientStart,&#10;                            colors.gradientMiddle,&#10;                            colors.gradientEnd&#10;                        )&#10;                    )&#10;                )&#10;                .padding(horizontal = 24.dp, vertical = 32.dp)&#10;        ) {&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Row(&#10;                    verticalAlignment = Alignment.CenterVertically,&#10;                    horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                ) {&#10;                    Icon(&#10;                        Icons.Default.DevicesOther,&#10;                        contentDescription = null,&#10;                        tint = MaterialTheme.colorScheme.onPrimary,&#10;                        modifier = Modifier.size(32.dp)&#10;                    )&#10;                    Column {&#10;                        Text(&#10;                            text = &quot;Mis Equipos&quot;,&#10;                            style = MaterialTheme.typography.headlineMedium,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = MaterialTheme.colorScheme.onPrimary&#10;                        )&#10;                        Text(&#10;                            text = &quot;${equipments.size} equipos monitoreados&quot;,&#10;                            style = MaterialTheme.typography.bodyMedium,&#10;                            color = MaterialTheme.colorScheme.onPrimary.copy(alpha = 0.9f)&#10;                        )&#10;                    }&#10;                }&#10;&#10;                IconButton(onClick = { /* Navegar a notificaciones */ }) {&#10;                    Icon(&#10;                        Icons.Default.Notifications,&#10;                        contentDescription = &quot;Notificaciones&quot;,&#10;                        tint = MaterialTheme.colorScheme.onPrimary,&#10;                        modifier = Modifier.size(28.dp)&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        // Contenido principal&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(horizontal = 16.dp)&#10;        ) {&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // Banner informativo&#10;            Card(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = MaterialTheme.colorScheme.secondaryContainer&#10;                ),&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;            ) {&#10;                Row(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(16.dp),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Column(modifier = Modifier.weight(1f)) {&#10;                        Text(&#10;                            text = &quot;Gestión de Equipos&quot;,&#10;                            style = MaterialTheme.typography.titleMedium,&#10;                            fontWeight = FontWeight.SemiBold,&#10;                            color = MaterialTheme.colorScheme.onSecondaryContainer&#10;                        )&#10;                        Text(&#10;                            text = &quot;Consulta tus equipos activos&quot;,&#10;                            style = MaterialTheme.typography.bodySmall,&#10;                            color = MaterialTheme.colorScheme.onSecondaryContainer.copy(alpha = 0.8f)&#10;                        )&#10;                    }&#10;&#10;                    FilledTonalButton(&#10;                        onClick = { viewModel.loadClientEquipments(clientId) },&#10;                        contentPadding = PaddingValues(horizontal = 16.dp, vertical = 8.dp)&#10;                    ) {&#10;                        Icon(&#10;                            Icons.Default.Refresh,&#10;                            contentDescription = null,&#10;                            modifier = Modifier.size(18.dp)&#10;                        )&#10;                        Spacer(modifier = Modifier.width(4.dp))&#10;                        Text(&quot;Actualizar&quot;)&#10;                    }&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // Encabezado de lista&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(vertical = 8.dp),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Text(&#10;                    text = &quot;Equipos&quot;,&#10;                    style = MaterialTheme.typography.titleMedium,&#10;                    fontWeight = FontWeight.SemiBold,&#10;                    color = MaterialTheme.colorScheme.onBackground&#10;                )&#10;&#10;                if (equipments.isNotEmpty()) {&#10;                    Surface(&#10;                        shape = RoundedCornerShape(8.dp),&#10;                        color = MaterialTheme.colorScheme.primaryContainer&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;${equipments.size}&quot;,&#10;                            modifier = Modifier.padding(horizontal = 12.dp, vertical = 4.dp),&#10;                            style = MaterialTheme.typography.labelLarge,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;&#10;            // Lista de equipos&#10;            if (equipments.isEmpty()) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .fillMaxSize()&#10;                        .padding(top = 32.dp),&#10;                    contentAlignment = Alignment.TopCenter&#10;                ) {&#10;                    Column(&#10;                        horizontalAlignment = Alignment.CenterHorizontally,&#10;                        verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                    ) {&#10;                        Icon(&#10;                            Icons.Default.DevicesOther,&#10;                            contentDescription = null,&#10;                            modifier = Modifier.size(64.dp),&#10;                            tint = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.5f)&#10;                        )&#10;                        Text(&#10;                            text = &quot;No hay equipos registrados&quot;,&#10;                            style = MaterialTheme.typography.titleMedium,&#10;                            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                        )&#10;                        Text(&#10;                            text = &quot;Agrega tu primer equipo para comenzar&quot;,&#10;                            style = MaterialTheme.typography.bodyMedium,&#10;                            color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.7f)&#10;                        )&#10;                    }&#10;                }&#10;            } else {&#10;                LazyColumn(&#10;                    verticalArrangement = Arrangement.spacedBy(12.dp),&#10;                    contentPadding = PaddingValues(bottom = 16.dp)&#10;                ) {&#10;                    items(equipments) { equipment -&gt;&#10;                        ClientEquipmentCard(equipment) {&#10;                            onTapEquipmentCard(equipment.equipmentId)&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.client.equipments.presentation&#13;&#10;&#13;&#10;import androidx.compose.foundation.background&#13;&#10;import androidx.compose.foundation.layout.*&#13;&#10;import androidx.compose.foundation.lazy.LazyColumn&#13;&#10;import androidx.compose.foundation.lazy.items&#13;&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#13;&#10;import androidx.compose.material.icons.Icons&#13;&#10;import androidx.compose.material.icons.filled.*&#13;&#10;import androidx.compose.material3.*&#13;&#10;import androidx.compose.runtime.*&#13;&#10;import androidx.compose.ui.Alignment&#13;&#10;import androidx.compose.ui.Modifier&#13;&#10;import androidx.compose.ui.graphics.Brush&#13;&#10;import androidx.compose.ui.text.font.FontWeight&#13;&#10;import androidx.compose.ui.unit.dp&#13;&#10;import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel&#13;&#10;import pe.edu.upc.polarnet.core.ui.theme.polarNetColors&#13;&#10;import pe.edu.upc.polarnet.features.client.equipments.presentation.equipment.ClientEquipmentCard&#13;&#10;&#13;&#10;@Composable&#13;&#10;fun ClientEquipmentsScreen(&#13;&#10;    clientId: Long,&#13;&#10;    viewModel: ClientEquipmentViewModel = hiltViewModel(),&#13;&#10;    onTapEquipmentCard: (Long) -&gt; Unit&#13;&#10;) {&#13;&#10;    val equipments by viewModel.clientEquipments.collectAsState()&#10;    val colors = MaterialTheme.polarNetColors&#10;&#10;    // Recargar equipos cada vez que la pantalla se muestra&#10;    LaunchedEffect(Unit) {&#10;        android.util.Log.d(&quot;ClientEquipments&quot;, &quot;Pantalla visible - Recargando equipos del cliente: $clientId&quot;)&#10;        viewModel.loadClientEquipments(clientId)&#10;    }&#13;&#10;&#13;&#10;    Column(&#13;&#10;        modifier = Modifier&#13;&#10;            .fillMaxSize()&#13;&#10;            .background(MaterialTheme.colorScheme.background)&#13;&#10;    ) {&#13;&#10;        // Header con gradiente&#13;&#10;        Box(&#13;&#10;            modifier = Modifier&#13;&#10;                .fillMaxWidth()&#13;&#10;                .background(&#13;&#10;                    Brush.horizontalGradient(&#13;&#10;                        colors = listOf(&#13;&#10;                            colors.gradientStart,&#13;&#10;                            colors.gradientMiddle,&#13;&#10;                            colors.gradientEnd&#13;&#10;                        )&#13;&#10;                    )&#13;&#10;                )&#13;&#10;                .padding(horizontal = 24.dp, vertical = 32.dp)&#13;&#10;        ) {&#13;&#10;            Row(&#13;&#10;                modifier = Modifier.fillMaxWidth(),&#13;&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#13;&#10;                verticalAlignment = Alignment.CenterVertically&#13;&#10;            ) {&#13;&#10;                Row(&#13;&#10;                    verticalAlignment = Alignment.CenterVertically,&#13;&#10;                    horizontalArrangement = Arrangement.spacedBy(12.dp)&#13;&#10;                ) {&#13;&#10;                    Icon(&#13;&#10;                        Icons.Default.DevicesOther,&#13;&#10;                        contentDescription = null,&#13;&#10;                        tint = MaterialTheme.colorScheme.onPrimary,&#13;&#10;                        modifier = Modifier.size(32.dp)&#13;&#10;                    )&#13;&#10;                    Column {&#13;&#10;                        Text(&#13;&#10;                            text = &quot;Mis Equipos&quot;,&#13;&#10;                            style = MaterialTheme.typography.headlineMedium,&#13;&#10;                            fontWeight = FontWeight.Bold,&#13;&#10;                            color = MaterialTheme.colorScheme.onPrimary&#13;&#10;                        )&#13;&#10;                        Text(&#13;&#10;                            text = &quot;${equipments.size} equipos monitoreados&quot;,&#13;&#10;                            style = MaterialTheme.typography.bodyMedium,&#13;&#10;                            color = MaterialTheme.colorScheme.onPrimary.copy(alpha = 0.9f)&#13;&#10;                        )&#13;&#10;                    }&#13;&#10;                }&#13;&#10;&#13;&#10;                IconButton(onClick = { /* Navegar a notificaciones */ }) {&#13;&#10;                    Icon(&#13;&#10;                        Icons.Default.Notifications,&#13;&#10;                        contentDescription = &quot;Notificaciones&quot;,&#13;&#10;                        tint = MaterialTheme.colorScheme.onPrimary,&#13;&#10;                        modifier = Modifier.size(28.dp)&#13;&#10;                    )&#13;&#10;                }&#13;&#10;            }&#13;&#10;        }&#13;&#10;&#13;&#10;        // Contenido principal&#13;&#10;        Column(&#13;&#10;            modifier = Modifier&#13;&#10;                .fillMaxSize()&#13;&#10;                .padding(horizontal = 16.dp)&#13;&#10;        ) {&#13;&#10;            Spacer(modifier = Modifier.height(16.dp))&#13;&#10;&#13;&#10;            // Banner informativo&#13;&#10;            Card(&#13;&#10;                modifier = Modifier.fillMaxWidth(),&#13;&#10;                shape = RoundedCornerShape(16.dp),&#13;&#10;                colors = CardDefaults.cardColors(&#13;&#10;                    containerColor = MaterialTheme.colorScheme.secondaryContainer&#13;&#10;                ),&#13;&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#13;&#10;            ) {&#13;&#10;                Row(&#13;&#10;                    modifier = Modifier&#13;&#10;                        .fillMaxWidth()&#13;&#10;                        .padding(16.dp),&#13;&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#13;&#10;                    verticalAlignment = Alignment.CenterVertically&#13;&#10;                ) {&#13;&#10;                    Column(modifier = Modifier.weight(1f)) {&#13;&#10;                        Text(&#13;&#10;                            text = &quot;Gestión de Equipos&quot;,&#13;&#10;                            style = MaterialTheme.typography.titleMedium,&#13;&#10;                            fontWeight = FontWeight.SemiBold,&#13;&#10;                            color = MaterialTheme.colorScheme.onSecondaryContainer&#13;&#10;                        )&#13;&#10;                        Text(&#13;&#10;                            text = &quot;Consulta tus equipos activos&quot;,&#13;&#10;                            style = MaterialTheme.typography.bodySmall,&#13;&#10;                            color = MaterialTheme.colorScheme.onSecondaryContainer.copy(alpha = 0.8f)&#13;&#10;                        )&#13;&#10;                    }&#13;&#10;&#13;&#10;                    FilledTonalButton(&#13;&#10;                        onClick = { viewModel.loadClientEquipments(clientId) },&#13;&#10;                        contentPadding = PaddingValues(horizontal = 16.dp, vertical = 8.dp)&#13;&#10;                    ) {&#13;&#10;                        Icon(&#13;&#10;                            Icons.Default.Refresh,&#13;&#10;                            contentDescription = null,&#13;&#10;                            modifier = Modifier.size(18.dp)&#13;&#10;                        )&#13;&#10;                        Spacer(modifier = Modifier.width(4.dp))&#13;&#10;                        Text(&quot;Actualizar&quot;)&#13;&#10;                    }&#13;&#10;                }&#13;&#10;            }&#13;&#10;&#13;&#10;            Spacer(modifier = Modifier.height(16.dp))&#13;&#10;&#13;&#10;            // Encabezado de lista&#13;&#10;            Row(&#13;&#10;                modifier = Modifier&#13;&#10;                    .fillMaxWidth()&#13;&#10;                    .padding(vertical = 8.dp),&#13;&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#13;&#10;                verticalAlignment = Alignment.CenterVertically&#13;&#10;            ) {&#13;&#10;                Text(&#13;&#10;                    text = &quot;Equipos&quot;,&#13;&#10;                    style = MaterialTheme.typography.titleMedium,&#13;&#10;                    fontWeight = FontWeight.SemiBold,&#13;&#10;                    color = MaterialTheme.colorScheme.onBackground&#13;&#10;                )&#13;&#10;&#13;&#10;                if (equipments.isNotEmpty()) {&#13;&#10;                    Surface(&#13;&#10;                        shape = RoundedCornerShape(8.dp),&#13;&#10;                        color = MaterialTheme.colorScheme.primaryContainer&#13;&#10;                    ) {&#13;&#10;                        Text(&#13;&#10;                            text = &quot;${equipments.size}&quot;,&#13;&#10;                            modifier = Modifier.padding(horizontal = 12.dp, vertical = 4.dp),&#13;&#10;                            style = MaterialTheme.typography.labelLarge,&#13;&#10;                            fontWeight = FontWeight.Bold,&#13;&#10;                            color = MaterialTheme.colorScheme.onPrimaryContainer&#13;&#10;                        )&#13;&#10;                    }&#13;&#10;                }&#13;&#10;            }&#13;&#10;&#13;&#10;            // Lista de equipos&#13;&#10;            if (equipments.isEmpty()) {&#13;&#10;                Box(&#13;&#10;                    modifier = Modifier&#13;&#10;                        .fillMaxSize()&#13;&#10;                        .padding(top = 32.dp),&#13;&#10;                    contentAlignment = Alignment.TopCenter&#13;&#10;                ) {&#13;&#10;                    Column(&#13;&#10;                        horizontalAlignment = Alignment.CenterHorizontally,&#13;&#10;                        verticalArrangement = Arrangement.spacedBy(16.dp)&#13;&#10;                    ) {&#13;&#10;                        Icon(&#13;&#10;                            Icons.Default.DevicesOther,&#13;&#10;                            contentDescription = null,&#13;&#10;                            modifier = Modifier.size(64.dp),&#13;&#10;                            tint = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.5f)&#13;&#10;                        )&#13;&#10;                        Text(&#13;&#10;                            text = &quot;No hay equipos registrados&quot;,&#13;&#10;                            style = MaterialTheme.typography.titleMedium,&#13;&#10;                            color = MaterialTheme.colorScheme.onSurfaceVariant&#13;&#10;                        )&#13;&#10;                        Text(&#13;&#10;                            text = &quot;Agrega tu primer equipo para comenzar&quot;,&#13;&#10;                            style = MaterialTheme.typography.bodyMedium,&#13;&#10;                            color = MaterialTheme.colorScheme.onSurfaceVariant.copy(alpha = 0.7f)&#13;&#10;                        )&#13;&#10;                    }&#13;&#10;                }&#13;&#10;            } else {&#13;&#10;                LazyColumn(&#13;&#10;                    verticalArrangement = Arrangement.spacedBy(12.dp),&#13;&#10;                    contentPadding = PaddingValues(bottom = 16.dp)&#13;&#10;                ) {&#13;&#10;                    items(equipments) { equipment -&gt;&#13;&#10;                        ClientEquipmentCard(equipment) {&#13;&#10;                            onTapEquipmentCard(equipment.equipmentId)&#13;&#10;                        }&#13;&#10;                    }&#13;&#10;                }&#13;&#10;            }&#13;&#10;        }&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/provider/home/data/remote/services/ServiceRequestService.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/provider/home/data/remote/services/ServiceRequestService.kt" />
              <option name="originalContent" value="package pe.edu.upc.polarnet.features.provider.home.data.remote.services&#10;&#10;import com.google.gson.JsonObject&#10;import pe.edu.upc.polarnet.features.provider.home.data.remote.models.ServiceRequestDto&#10;import retrofit2.Response&#10;import retrofit2.http.*&#10;&#10;interface ServiceRequestService {&#10;&#10;    // Obtener todas las solicitudes con relaciones (equipment y client)&#10;    @GET(&quot;service_requests&quot;)&#10;    suspend fun getAllServiceRequests(&#10;        @Query(&quot;select&quot;) select: String = &quot;*,equipment(*),client:users!client_id(*)&quot;&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;&#10;    // Filtrar por status&#10;    @GET(&quot;service_requests&quot;)&#10;    suspend fun getServiceRequestsByStatus(&#10;        @Query(&quot;status&quot;) status: String,&#10;        @Query(&quot;select&quot;) select: String = &quot;*,equipment(*),client:users!client_id(*)&quot;&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;&#10;    @GET(&quot;service_requests&quot;)&#10;    suspend fun getServiceRequestById(&#10;        @Query(&quot;id&quot;) id: String,&#10;        @Query(&quot;select&quot;) select: String = &quot;*,equipment(*),client:users!client_id(*)&quot;&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;&#10;    // Actualizar estado de solicitud&#10;    @PATCH(&quot;service_requests&quot;)&#10;    suspend fun updateServiceRequestStatus(&#10;        @Query(&quot;id&quot;) idQuery: String,&#10;        @Body statusUpdate: JsonObject,&#10;        @Header(&quot;Prefer&quot;) prefer: String = &quot;return=representation&quot;&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;&#10;    // Eliminar solicitud&#10;    @DELETE(&quot;service_requests&quot;)&#10;    suspend fun deleteServiceRequest(&#10;        @Query(&quot;id&quot;) idQuery: String&#10;    ): Response&lt;Unit&gt;&#10;}" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.provider.home.data.remote.services&#10;&#10;import com.google.gson.JsonObject&#10;import pe.edu.upc.polarnet.features.provider.home.data.remote.models.ServiceRequestDto&#10;import retrofit2.Response&#10;import retrofit2.http.*&#10;&#10;interface ServiceRequestService {&#10;&#10;    // Obtener todas las solicitudes con relaciones (equipment y client)&#10;    @GET(&quot;service_requests&quot;)&#10;    suspend fun getAllServiceRequests(&#10;        @Query(&quot;select&quot;) select: String = &quot;*,equipment(*),client:users!client_id(*)&quot;&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;&#10;    // Filtrar por status&#10;    @GET(&quot;service_requests&quot;)&#10;    suspend fun getServiceRequestsByStatus(&#10;        @Query(&quot;status&quot;) status: String,&#10;        @Query(&quot;select&quot;) select: String = &quot;*,equipment(*),client:users!client_id(*)&quot;&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;&#10;    @GET(&quot;service_requests&quot;)&#10;    suspend fun getServiceRequestById(&#10;        @Query(&quot;id&quot;) id: String,&#10;        @Query(&quot;select&quot;) select: String = &quot;*,equipment(*),client:users!client_id(*)&quot;&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;&#10;    // Actualizar estado de solicitud&#10;    @PATCH(&quot;service_requests&quot;)&#10;    suspend fun updateServiceRequestStatus(&#10;        @Query(&quot;id&quot;) idQuery: String,&#10;        @Body statusUpdate: JsonObject,&#10;        @Header(&quot;Prefer&quot;) prefer: String = &quot;return=representation&quot;&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;&#10;    // Eliminar solicitud&#10;    @DELETE(&quot;service_requests&quot;)&#10;    suspend fun deleteServiceRequest(&#10;        @Query(&quot;id&quot;) idQuery: String&#10;    ): Response&lt;Unit&gt;&#10;    &#10;    // Crear registro en client_equipment&#10;    @POST(&quot;client_equipment&quot;)&#10;    suspend fun createClientEquipment(&#10;        @Body clientEquipment: JsonObject,&#10;        @Header(&quot;Prefer&quot;) prefer: String = &quot;return=representation&quot;&#10;    ): Response&lt;List&lt;JsonObject&gt;&gt;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/provider/home/data/repositories/ServiceRequestRepositoryImpl.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/provider/home/data/repositories/ServiceRequestRepositoryImpl.kt" />
              <option name="originalContent" value="package pe.edu.upc.polarnet.features.provider.home.data.repositories&#10;&#10;import android.util.Log&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import pe.edu.upc.polarnet.features.auth.domain.models.User&#10;import pe.edu.upc.polarnet.features.auth.domain.models.UserRole&#10;import pe.edu.upc.polarnet.features.provider.home.data.local.dao.ServiceRequestDao&#10;import pe.edu.upc.polarnet.features.provider.home.data.local.models.ServiceRequestEntity&#10;import pe.edu.upc.polarnet.features.provider.home.data.remote.services.ServiceRequestService&#10;import pe.edu.upc.polarnet.features.provider.home.domain.repositories.ServiceRequestRepository&#10;import pe.edu.upc.polarnet.shared.models.Equipment&#10;import pe.edu.upc.polarnet.shared.models.ServiceRequest&#10;import javax.inject.Inject&#10;&#10;class ServiceRequestRepositoryImpl @Inject constructor(&#10;    private val service: ServiceRequestService,&#10;    private val dao: ServiceRequestDao&#10;) : ServiceRequestRepository {&#10;&#10;    override suspend fun getAllServiceRequests(): List&lt;ServiceRequest&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            val response = service.getAllServiceRequests()&#10;&#10;            if (response.isSuccessful) {&#10;                val serviceRequests = response.body()?.map { dto -&gt;&#10;                    ServiceRequest(&#10;                        id = dto.id,&#10;                        clientId = dto.clientId,&#10;                        equipmentId = dto.equipmentId,&#10;                        requestType = dto.requestType,&#10;                        description = dto.description,&#10;                        startDate = dto.startDate,&#10;                        endDate = dto.endDate,&#10;                        status = dto.status,&#10;                        totalPrice = dto.totalPrice,&#10;                        notes = dto.notes,&#10;                        createdAt = dto.createdAt,&#10;                        equipment = dto.equipment?.let {&#10;                            Equipment(&#10;                                id = it.id,&#10;                                providerId = it.providerId,&#10;                                name = it.name,&#10;                                brand = it.brand,&#10;                                model = it.model,&#10;                                category = it.category,&#10;                                description = it.description,&#10;                                thumbnail = it.thumbnail,&#10;                                specifications = it.specifications,&#10;                                available = it.available,&#10;                                location = it.location,&#10;                                pricePerMonth = it.pricePerMonth,&#10;                                purchasePrice = it.purchasePrice,&#10;                                createdAt = it.createdAt,&#10;                                updatedAt = it.updatedAt&#10;                            )&#10;                        },&#10;                        client = dto.client?.let {&#10;                            User(&#10;                                id = it.id,&#10;                                fullName = it.fullName,&#10;                                email = it.email,&#10;                                password = &quot;&quot;, // No exponemos password&#10;                                role = UserRole.fromString(it.role),&#10;                                companyName = it.companyName,&#10;                                phone = it.phone,&#10;                                location = it.location,&#10;                                createdAt = it.createdAt&#10;                            )&#10;                        }&#10;                    )&#10;                } ?: emptyList()&#10;&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;Solicitudes obtenidas: ${serviceRequests.size}&quot;)&#10;                return@withContext serviceRequests&#10;            } else {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Error: ${response.code()} - ${response.message()}&quot;)&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Body: ${response.errorBody()?.string()}&quot;)&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(&quot;ServiceRequestRepo&quot;, &quot;Exception: ${e.message}&quot;, e)&#10;        }&#10;&#10;        return@withContext emptyList()&#10;    }&#10;&#10;    override suspend fun getServiceRequestsByStatus(status: String): List&lt;ServiceRequest&gt; =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                val response = service.getServiceRequestsByStatus(status)&#10;&#10;                if (response.isSuccessful) {&#10;                    return@withContext response.body()?.map { dto -&gt;&#10;                        ServiceRequest(&#10;                            id = dto.id,&#10;                            clientId = dto.clientId,&#10;                            equipmentId = dto.equipmentId,&#10;                            requestType = dto.requestType,&#10;                            description = dto.description,&#10;                            startDate = dto.startDate,&#10;                            endDate = dto.endDate,&#10;                            status = dto.status,&#10;                            totalPrice = dto.totalPrice,&#10;                            notes = dto.notes,&#10;                            createdAt = dto.createdAt,&#10;                            equipment = dto.equipment?.let {&#10;                                Equipment(&#10;                                    id = it.id,&#10;                                    providerId = it.providerId,&#10;                                    name = it.name,&#10;                                    brand = it.brand,&#10;                                    model = it.model,&#10;                                    category = it.category,&#10;                                    description = it.description,&#10;                                    thumbnail = it.thumbnail,&#10;                                    specifications = it.specifications,&#10;                                    available = it.available,&#10;                                    location = it.location,&#10;                                    pricePerMonth = it.pricePerMonth,&#10;                                    purchasePrice = it.purchasePrice,&#10;                                    createdAt = it.createdAt,&#10;                                    updatedAt = it.updatedAt&#10;                                )&#10;                            },&#10;                            client = dto.client?.let {&#10;                                User(&#10;                                    id = it.id,&#10;                                    fullName = it.fullName,&#10;                                    email = it.email,&#10;                                    password = &quot;&quot;,&#10;                                    role = UserRole.fromString(it.role),&#10;                                    companyName = it.companyName,&#10;                                    phone = it.phone,&#10;                                    location = it.location,&#10;                                    createdAt = it.createdAt&#10;                                )&#10;                            }&#10;                        )&#10;                    } ?: emptyList()&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Exception: ${e.message}&quot;, e)&#10;            }&#10;&#10;            return@withContext emptyList()&#10;        }&#10;&#10;    override suspend fun getServiceRequestById(id: Long): ServiceRequest? =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                val response = service.getServiceRequestById(&quot;eq.$id&quot;)&#10;&#10;                if (response.isSuccessful) {&#10;                    response.body()?.firstOrNull()?.let { dto -&gt;&#10;                        return@withContext ServiceRequest(&#10;                            id = dto.id,&#10;                            clientId = dto.clientId,&#10;                            equipmentId = dto.equipmentId,&#10;                            requestType = dto.requestType,&#10;                            description = dto.description,&#10;                            startDate = dto.startDate,&#10;                            endDate = dto.endDate,&#10;                            status = dto.status,&#10;                            totalPrice = dto.totalPrice,&#10;                            notes = dto.notes,&#10;                            createdAt = dto.createdAt,&#10;                            equipment = dto.equipment?.let {&#10;                                Equipment(&#10;                                    id = it.id,&#10;                                    providerId = it.providerId,&#10;                                    name = it.name,&#10;                                    brand = it.brand,&#10;                                    model = it.model,&#10;                                    category = it.category,&#10;                                    description = it.description,&#10;                                    thumbnail = it.thumbnail,&#10;                                    specifications = it.specifications,&#10;                                    available = it.available,&#10;                                    location = it.location,&#10;                                    pricePerMonth = it.pricePerMonth,&#10;                                    purchasePrice = it.purchasePrice,&#10;                                    createdAt = it.createdAt,&#10;                                    updatedAt = it.updatedAt&#10;                                )&#10;                            },&#10;                            client = dto.client?.let {&#10;                                User(&#10;                                    id = it.id,&#10;                                    fullName = it.fullName,&#10;                                    email = it.email,&#10;                                    password = &quot;&quot;,&#10;                                    role = UserRole.fromString(it.role),&#10;                                    companyName = it.companyName,&#10;                                    phone = it.phone,&#10;                                    location = it.location,&#10;                                    createdAt = it.createdAt&#10;                                )&#10;                            }&#10;                        )&#10;                    }&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Exception: ${e.message}&quot;, e)&#10;            }&#10;&#10;            return@withContext null&#10;        }&#10;&#10;    override suspend fun insert(serviceRequest: ServiceRequest) = withContext(Dispatchers.IO) {&#10;        dao.insert(&#10;            ServiceRequestEntity(&#10;                id = serviceRequest.id,&#10;                clientId = serviceRequest.clientId,&#10;                equipmentId = serviceRequest.equipmentId,&#10;                requestType = serviceRequest.requestType,&#10;                description = serviceRequest.description,&#10;                startDate = serviceRequest.startDate,&#10;                endDate = serviceRequest.endDate,&#10;                status = serviceRequest.status,&#10;                totalPrice = serviceRequest.totalPrice,&#10;                notes = serviceRequest.notes,&#10;                createdAt = serviceRequest.createdAt&#10;            )&#10;        )&#10;    }&#10;&#10;    override suspend fun delete(serviceRequest: ServiceRequest) = withContext(Dispatchers.IO) {&#10;        dao.delete(&#10;            ServiceRequestEntity(&#10;                id = serviceRequest.id,&#10;                clientId = serviceRequest.clientId,&#10;                equipmentId = serviceRequest.equipmentId,&#10;                requestType = serviceRequest.requestType,&#10;                description = serviceRequest.description,&#10;                startDate = serviceRequest.startDate,&#10;                endDate = serviceRequest.endDate,&#10;                status = serviceRequest.status,&#10;                totalPrice = serviceRequest.totalPrice,&#10;                notes = serviceRequest.notes,&#10;                createdAt = serviceRequest.createdAt&#10;            )&#10;        )&#10;    }&#10;&#10;    override suspend fun updateServiceRequestStatus(id: Long, status: String): Result&lt;ServiceRequest&gt; =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;ACTUALIZANDO ESTADO DE SOLICITUD&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;ID: $id&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;Nuevo estado: $status&quot;)&#10;&#10;                val statusUpdate = com.google.gson.JsonObject().apply {&#10;                    addProperty(&quot;status&quot;, status)&#10;                }&#10;&#10;                val response = service.updateServiceRequestStatus(&#10;                    idQuery = &quot;eq.$id&quot;,&#10;                    statusUpdate = statusUpdate&#10;                )&#10;&#10;                if (response.isSuccessful) {&#10;                    val dtoList = response.body()&#10;                    if (!dtoList.isNullOrEmpty()) {&#10;                        val dto = dtoList[0]&#10;                        Log.d(&quot;ServiceRequestRepo&quot;, &quot;Estado actualizado exitosamente&quot;)&#10;&#10;                        val updatedRequest = ServiceRequest(&#10;                            id = dto.id,&#10;                            clientId = dto.clientId,&#10;                            equipmentId = dto.equipmentId,&#10;                            requestType = dto.requestType,&#10;                            description = dto.description,&#10;                            startDate = dto.startDate,&#10;                            endDate = dto.endDate,&#10;                            status = dto.status,&#10;                            totalPrice = dto.totalPrice,&#10;                            notes = dto.notes,&#10;                            createdAt = dto.createdAt,&#10;                            equipment = dto.equipment?.let {&#10;                                Equipment(&#10;                                    id = it.id,&#10;                                    providerId = it.providerId,&#10;                                    name = it.name,&#10;                                    brand = it.brand,&#10;                                    model = it.model,&#10;                                    category = it.category,&#10;                                    description = it.description,&#10;                                    thumbnail = it.thumbnail,&#10;                                    specifications = it.specifications,&#10;                                    available = it.available,&#10;                                    location = it.location,&#10;                                    pricePerMonth = it.pricePerMonth,&#10;                                    purchasePrice = it.purchasePrice,&#10;                                    createdAt = it.createdAt,&#10;                                    updatedAt = it.updatedAt&#10;                                )&#10;                            },&#10;                            client = dto.client?.let {&#10;                                User(&#10;                                    id = it.id,&#10;                                    fullName = it.fullName,&#10;                                    email = it.email,&#10;                                    password = &quot;&quot;,&#10;                                    role = UserRole.fromString(it.role),&#10;                                    companyName = it.companyName,&#10;                                    phone = it.phone,&#10;                                    location = it.location,&#10;                                    createdAt = it.createdAt&#10;                                )&#10;                            }&#10;                        )&#10;&#10;                        return@withContext Result.success(updatedRequest)&#10;                    } else {&#10;                        Log.e(&quot;ServiceRequestRepo&quot;, &quot;Respuesta vacía&quot;)&#10;                        return@withContext Result.failure(Exception(&quot;Error: Respuesta vacía del servidor&quot;))&#10;                    }&#10;                } else {&#10;                    val errorBody = response.errorBody()?.string()&#10;                    Log.e(&quot;ServiceRequestRepo&quot;, &quot;Error ${response.code()}: $errorBody&quot;)&#10;                    return@withContext Result.failure(Exception(&quot;Error al actualizar: ${response.code()}&quot;))&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Excepción: ${e.message}&quot;, e)&#10;                return@withContext Result.failure(e)&#10;            }&#10;        }&#10;&#10;    override suspend fun deleteServiceRequest(id: Long): Result&lt;Boolean&gt; =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;ELIMINANDO SOLICITUD&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;ID: $id&quot;)&#10;&#10;                val response = service.deleteServiceRequest(idQuery = &quot;eq.$id&quot;)&#10;&#10;                if (response.isSuccessful) {&#10;                    Log.d(&quot;ServiceRequestRepo&quot;, &quot;Solicitud eliminada exitosamente&quot;)&#10;                    return@withContext Result.success(true)&#10;                } else {&#10;                    val errorBody = response.errorBody()?.string()&#10;                    Log.e(&quot;ServiceRequestRepo&quot;, &quot;Error ${response.code()}: $errorBody&quot;)&#10;                    return@withContext Result.failure(Exception(&quot;Error al eliminar: ${response.code()}&quot;))&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Excepción: ${e.message}&quot;, e)&#10;                return@withContext Result.failure(e)&#10;            }&#10;        }&#10;}" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.provider.home.data.repositories&#10;&#10;import android.util.Log&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import pe.edu.upc.polarnet.features.auth.domain.models.User&#10;import pe.edu.upc.polarnet.features.auth.domain.models.UserRole&#10;import pe.edu.upc.polarnet.features.provider.home.data.local.dao.ServiceRequestDao&#10;import pe.edu.upc.polarnet.features.provider.home.data.local.models.ServiceRequestEntity&#10;import pe.edu.upc.polarnet.features.provider.home.data.remote.services.ServiceRequestService&#10;import pe.edu.upc.polarnet.features.provider.home.domain.repositories.ServiceRequestRepository&#10;import pe.edu.upc.polarnet.shared.models.Equipment&#10;import pe.edu.upc.polarnet.shared.models.ServiceRequest&#10;import javax.inject.Inject&#10;&#10;class ServiceRequestRepositoryImpl @Inject constructor(&#10;    private val service: ServiceRequestService,&#10;    private val dao: ServiceRequestDao&#10;) : ServiceRequestRepository {&#10;&#10;    override suspend fun getAllServiceRequests(): List&lt;ServiceRequest&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            val response = service.getAllServiceRequests()&#10;&#10;            if (response.isSuccessful) {&#10;                val serviceRequests = response.body()?.map { dto -&gt;&#10;                    ServiceRequest(&#10;                        id = dto.id,&#10;                        clientId = dto.clientId,&#10;                        equipmentId = dto.equipmentId,&#10;                        requestType = dto.requestType,&#10;                        description = dto.description,&#10;                        startDate = dto.startDate,&#10;                        endDate = dto.endDate,&#10;                        status = dto.status,&#10;                        totalPrice = dto.totalPrice,&#10;                        notes = dto.notes,&#10;                        createdAt = dto.createdAt,&#10;                        equipment = dto.equipment?.let {&#10;                            Equipment(&#10;                                id = it.id,&#10;                                providerId = it.providerId,&#10;                                name = it.name,&#10;                                brand = it.brand,&#10;                                model = it.model,&#10;                                category = it.category,&#10;                                description = it.description,&#10;                                thumbnail = it.thumbnail,&#10;                                specifications = it.specifications,&#10;                                available = it.available,&#10;                                location = it.location,&#10;                                pricePerMonth = it.pricePerMonth,&#10;                                purchasePrice = it.purchasePrice,&#10;                                createdAt = it.createdAt,&#10;                                updatedAt = it.updatedAt&#10;                            )&#10;                        },&#10;                        client = dto.client?.let {&#10;                            User(&#10;                                id = it.id,&#10;                                fullName = it.fullName,&#10;                                email = it.email,&#10;                                password = &quot;&quot;, // No exponemos password&#10;                                role = UserRole.fromString(it.role),&#10;                                companyName = it.companyName,&#10;                                phone = it.phone,&#10;                                location = it.location,&#10;                                createdAt = it.createdAt&#10;                            )&#10;                        }&#10;                    )&#10;                } ?: emptyList()&#10;&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;Solicitudes obtenidas: ${serviceRequests.size}&quot;)&#10;                return@withContext serviceRequests&#10;            } else {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Error: ${response.code()} - ${response.message()}&quot;)&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Body: ${response.errorBody()?.string()}&quot;)&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(&quot;ServiceRequestRepo&quot;, &quot;Exception: ${e.message}&quot;, e)&#10;        }&#10;&#10;        return@withContext emptyList()&#10;    }&#10;&#10;    override suspend fun getServiceRequestsByStatus(status: String): List&lt;ServiceRequest&gt; =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                val response = service.getServiceRequestsByStatus(status)&#10;&#10;                if (response.isSuccessful) {&#10;                    return@withContext response.body()?.map { dto -&gt;&#10;                        ServiceRequest(&#10;                            id = dto.id,&#10;                            clientId = dto.clientId,&#10;                            equipmentId = dto.equipmentId,&#10;                            requestType = dto.requestType,&#10;                            description = dto.description,&#10;                            startDate = dto.startDate,&#10;                            endDate = dto.endDate,&#10;                            status = dto.status,&#10;                            totalPrice = dto.totalPrice,&#10;                            notes = dto.notes,&#10;                            createdAt = dto.createdAt,&#10;                            equipment = dto.equipment?.let {&#10;                                Equipment(&#10;                                    id = it.id,&#10;                                    providerId = it.providerId,&#10;                                    name = it.name,&#10;                                    brand = it.brand,&#10;                                    model = it.model,&#10;                                    category = it.category,&#10;                                    description = it.description,&#10;                                    thumbnail = it.thumbnail,&#10;                                    specifications = it.specifications,&#10;                                    available = it.available,&#10;                                    location = it.location,&#10;                                    pricePerMonth = it.pricePerMonth,&#10;                                    purchasePrice = it.purchasePrice,&#10;                                    createdAt = it.createdAt,&#10;                                    updatedAt = it.updatedAt&#10;                                )&#10;                            },&#10;                            client = dto.client?.let {&#10;                                User(&#10;                                    id = it.id,&#10;                                    fullName = it.fullName,&#10;                                    email = it.email,&#10;                                    password = &quot;&quot;,&#10;                                    role = UserRole.fromString(it.role),&#10;                                    companyName = it.companyName,&#10;                                    phone = it.phone,&#10;                                    location = it.location,&#10;                                    createdAt = it.createdAt&#10;                                )&#10;                            }&#10;                        )&#10;                    } ?: emptyList()&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Exception: ${e.message}&quot;, e)&#10;            }&#10;&#10;            return@withContext emptyList()&#10;        }&#10;&#10;    override suspend fun getServiceRequestById(id: Long): ServiceRequest? =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                val response = service.getServiceRequestById(&quot;eq.$id&quot;)&#10;&#10;                if (response.isSuccessful) {&#10;                    response.body()?.firstOrNull()?.let { dto -&gt;&#10;                        return@withContext ServiceRequest(&#10;                            id = dto.id,&#10;                            clientId = dto.clientId,&#10;                            equipmentId = dto.equipmentId,&#10;                            requestType = dto.requestType,&#10;                            description = dto.description,&#10;                            startDate = dto.startDate,&#10;                            endDate = dto.endDate,&#10;                            status = dto.status,&#10;                            totalPrice = dto.totalPrice,&#10;                            notes = dto.notes,&#10;                            createdAt = dto.createdAt,&#10;                            equipment = dto.equipment?.let {&#10;                                Equipment(&#10;                                    id = it.id,&#10;                                    providerId = it.providerId,&#10;                                    name = it.name,&#10;                                    brand = it.brand,&#10;                                    model = it.model,&#10;                                    category = it.category,&#10;                                    description = it.description,&#10;                                    thumbnail = it.thumbnail,&#10;                                    specifications = it.specifications,&#10;                                    available = it.available,&#10;                                    location = it.location,&#10;                                    pricePerMonth = it.pricePerMonth,&#10;                                    purchasePrice = it.purchasePrice,&#10;                                    createdAt = it.createdAt,&#10;                                    updatedAt = it.updatedAt&#10;                                )&#10;                            },&#10;                            client = dto.client?.let {&#10;                                User(&#10;                                    id = it.id,&#10;                                    fullName = it.fullName,&#10;                                    email = it.email,&#10;                                    password = &quot;&quot;,&#10;                                    role = UserRole.fromString(it.role),&#10;                                    companyName = it.companyName,&#10;                                    phone = it.phone,&#10;                                    location = it.location,&#10;                                    createdAt = it.createdAt&#10;                                )&#10;                            }&#10;                        )&#10;                    }&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Exception: ${e.message}&quot;, e)&#10;            }&#10;&#10;            return@withContext null&#10;        }&#10;&#10;    override suspend fun insert(serviceRequest: ServiceRequest) = withContext(Dispatchers.IO) {&#10;        dao.insert(&#10;            ServiceRequestEntity(&#10;                id = serviceRequest.id,&#10;                clientId = serviceRequest.clientId,&#10;                equipmentId = serviceRequest.equipmentId,&#10;                requestType = serviceRequest.requestType,&#10;                description = serviceRequest.description,&#10;                startDate = serviceRequest.startDate,&#10;                endDate = serviceRequest.endDate,&#10;                status = serviceRequest.status,&#10;                totalPrice = serviceRequest.totalPrice,&#10;                notes = serviceRequest.notes,&#10;                createdAt = serviceRequest.createdAt&#10;            )&#10;        )&#10;    }&#10;&#10;    override suspend fun delete(serviceRequest: ServiceRequest) = withContext(Dispatchers.IO) {&#10;        dao.delete(&#10;            ServiceRequestEntity(&#10;                id = serviceRequest.id,&#10;                clientId = serviceRequest.clientId,&#10;                equipmentId = serviceRequest.equipmentId,&#10;                requestType = serviceRequest.requestType,&#10;                description = serviceRequest.description,&#10;                startDate = serviceRequest.startDate,&#10;                endDate = serviceRequest.endDate,&#10;                status = serviceRequest.status,&#10;                totalPrice = serviceRequest.totalPrice,&#10;                notes = serviceRequest.notes,&#10;                createdAt = serviceRequest.createdAt&#10;            )&#10;        )&#10;    }&#10;&#10;    override suspend fun updateServiceRequestStatus(id: Long, status: String): Result&lt;ServiceRequest&gt; =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;ACTUALIZANDO ESTADO DE SOLICITUD&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;ID: $id&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;Nuevo estado: $status&quot;)&#10;&#10;                val statusUpdate = com.google.gson.JsonObject().apply {&#10;                    addProperty(&quot;status&quot;, status)&#10;                }&#10;&#10;                val response = service.updateServiceRequestStatus(&#10;                    idQuery = &quot;eq.$id&quot;,&#10;                    statusUpdate = statusUpdate&#10;                )&#10;&#10;                if (response.isSuccessful) {&#10;                    val dtoList = response.body()&#10;                    if (!dtoList.isNullOrEmpty()) {&#10;                        val dto = dtoList[0]&#10;                        Log.d(&quot;ServiceRequestRepo&quot;, &quot;Estado actualizado exitosamente&quot;)&#10;&#10;                        val updatedRequest = ServiceRequest(&#10;                            id = dto.id,&#10;                            clientId = dto.clientId,&#10;                            equipmentId = dto.equipmentId,&#10;                            requestType = dto.requestType,&#10;                            description = dto.description,&#10;                            startDate = dto.startDate,&#10;                            endDate = dto.endDate,&#10;                            status = dto.status,&#10;                            totalPrice = dto.totalPrice,&#10;                            notes = dto.notes,&#10;                            createdAt = dto.createdAt,&#10;                            equipment = dto.equipment?.let {&#10;                                Equipment(&#10;                                    id = it.id,&#10;                                    providerId = it.providerId,&#10;                                    name = it.name,&#10;                                    brand = it.brand,&#10;                                    model = it.model,&#10;                                    category = it.category,&#10;                                    description = it.description,&#10;                                    thumbnail = it.thumbnail,&#10;                                    specifications = it.specifications,&#10;                                    available = it.available,&#10;                                    location = it.location,&#10;                                    pricePerMonth = it.pricePerMonth,&#10;                                    purchasePrice = it.purchasePrice,&#10;                                    createdAt = it.createdAt,&#10;                                    updatedAt = it.updatedAt&#10;                                )&#10;                            },&#10;                            client = dto.client?.let {&#10;                                User(&#10;                                    id = it.id,&#10;                                    fullName = it.fullName,&#10;                                    email = it.email,&#10;                                    password = &quot;&quot;,&#10;                                    role = UserRole.fromString(it.role),&#10;                                    companyName = it.companyName,&#10;                                    phone = it.phone,&#10;                                    location = it.location,&#10;                                    createdAt = it.createdAt&#10;                                )&#10;                            }&#10;                        )&#10;                        &#10;                        // Si el estado es &quot;completed&quot;, crear registro en client_equipment&#10;                        if (status == &quot;completed&quot;) {&#10;                            Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                            Log.d(&quot;ServiceRequestRepo&quot;, &quot;CREANDO REGISTRO EN CLIENT_EQUIPMENT&quot;)&#10;                            Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                            &#10;                            val clientEquipmentData = com.google.gson.JsonObject().apply {&#10;                                addProperty(&quot;client_id&quot;, dto.clientId)&#10;                                addProperty(&quot;equipment_id&quot;, dto.equipmentId)&#10;                                addProperty(&quot;ownership_type&quot;, &quot;rented&quot;)&#10;                                addProperty(&quot;start_date&quot;, dto.startDate)&#10;                                addProperty(&quot;end_date&quot;, dto.endDate)&#10;                                addProperty(&quot;status&quot;, &quot;active&quot;)&#10;                                addProperty(&quot;notes&quot;, &quot;Equipo rentado - Solicitud #${dto.id}&quot;)&#10;                            }&#10;                            &#10;                            try {&#10;                                val clientEquipmentResponse = service.createClientEquipment(clientEquipmentData)&#10;                                if (clientEquipmentResponse.isSuccessful) {&#10;                                    Log.d(&quot;ServiceRequestRepo&quot;, &quot;Client_equipment creado exitosamente&quot;)&#10;                                } else {&#10;                                    Log.e(&quot;ServiceRequestRepo&quot;, &quot;Error al crear client_equipment: ${clientEquipmentResponse.code()}&quot;)&#10;                                }&#10;                            } catch (e: Exception) {&#10;                                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Excepción al crear client_equipment: ${e.message}&quot;)&#10;                            }&#10;                        }&#10;&#10;                        return@withContext Result.success(updatedRequest)&#10;                    } else {&#10;                        Log.e(&quot;ServiceRequestRepo&quot;, &quot;Respuesta vacía&quot;)&#10;                        return@withContext Result.failure(Exception(&quot;Error: Respuesta vacía del servidor&quot;))&#10;                    }&#10;                } else {&#10;                    val errorBody = response.errorBody()?.string()&#10;                    Log.e(&quot;ServiceRequestRepo&quot;, &quot;Error ${response.code()}: $errorBody&quot;)&#10;                    return@withContext Result.failure(Exception(&quot;Error al actualizar: ${response.code()}&quot;))&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Excepción: ${e.message}&quot;, e)&#10;                return@withContext Result.failure(e)&#10;            }&#10;        }&#10;&#10;    override suspend fun deleteServiceRequest(id: Long): Result&lt;Boolean&gt; =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;ELIMINANDO SOLICITUD&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;ServiceRequestRepo&quot;, &quot;ID: $id&quot;)&#10;&#10;                val response = service.deleteServiceRequest(idQuery = &quot;eq.$id&quot;)&#10;&#10;                if (response.isSuccessful) {&#10;                    Log.d(&quot;ServiceRequestRepo&quot;, &quot;Solicitud eliminada exitosamente&quot;)&#10;                    return@withContext Result.success(true)&#10;                } else {&#10;                    val errorBody = response.errorBody()?.string()&#10;                    Log.e(&quot;ServiceRequestRepo&quot;, &quot;Error ${response.code()}: $errorBody&quot;)&#10;                    return@withContext Result.failure(Exception(&quot;Error al eliminar: ${response.code()}&quot;))&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;ServiceRequestRepo&quot;, &quot;Excepción: ${e.message}&quot;, e)&#10;                return@withContext Result.failure(e)&#10;            }&#10;        }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/shared/models/ServiceRequest.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/shared/models/ServiceRequest.kt" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.shared.models&#10;&#10;import kotlinx.serialization.Serializable&#10;&#10;@Serializable&#10;data class ServiceRequest(&#10;    val id: Long = 0,&#10;    val clientId: Long,&#10;    val equipmentId: Long,&#10;    val requestType: RequestType,&#10;    val description: String?,&#10;    val startDate: String,&#10;    val endDate: String?,&#10;    val status: RequestStatus = RequestStatus.PENDING,&#10;    val totalPrice: Double,&#10;    val notes: String?,&#10;    val createdAt: String? = null&#10;)&#10;&#10;enum class RequestType {&#10;    RENTAL,&#10;    MAINTENANCE,&#10;    INSTALLATION&#10;}&#10;&#10;enum class RequestStatus {&#10;    PENDING,&#10;    IN_PROGRESS,&#10;    COMPLETED,&#10;    CANCELLED&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>