<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/core/navigation/AppNavigation.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/core/navigation/AppNavigation.kt" />
              <option name="originalContent" value="package pe.edu.upc.polarnet.core.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.navArgument&#10;import pe.edu.upc.polarnet.core.root.Main&#10;import pe.edu.upc.polarnet.core.root.MainProveedor&#10;import pe.edu.upc.polarnet.core.ui.theme.PolarNetTheme&#10;import pe.edu.upc.polarnet.features.auth.presentation.login.Login&#10;import pe.edu.upc.polarnet.features.auth.presentation.login.LoginViewModel&#10;import pe.edu.upc.polarnet.features.auth.presentation.register.Register&#10;import pe.edu.upc.polarnet.features.auth.presentation.register.RegisterViewModel&#10;import pe.edu.upc.polarnet.features.client.home.presentation.equipmentdetail.EquipmentDetail&#10;import pe.edu.upc.polarnet.features.client.home.presentation.equipmentdetail.EquipmentDetailViewModel&#10;import pe.edu.upc.polarnet.features.client.services.presentation.serviceRequest.ServiceRequestScreen&#10;&#10;@Composable&#10;fun AppNavigation() {&#10;    val navController = rememberNavController()&#10;&#10;    val loginViewModel: LoginViewModel = hiltViewModel()&#10;&#10;    val registerViewModel: RegisterViewModel = hiltViewModel()&#10;&#10;    val loggedUser = loginViewModel.loggedUser.collectAsState().value&#10;&#10;    NavHost(navController, startDestination = Route.Login.route) {&#10;&#10;        //  LOGIN SCREEN&#10;        composable(Route.Login.route) {&#10;            Login(&#10;                viewModel = loginViewModel,&#10;                onLoginCliente = {&#10;                    navController.navigate(Route.MainCliente.route) {&#10;                        popUpTo(Route.Login.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onLoginProveedor = {&#10;                    navController.navigate(Route.MainProveedor.route) {&#10;                        popUpTo(Route.Login.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToRegister = {&#10;                    navController.navigate(Route.Register.route)&#10;                }&#10;            )&#10;        }&#10;        //  REGISTER SCREEN&#10;        composable(Route.Register.route) {&#10;            Register(&#10;                viewModel = registerViewModel,&#10;                onNavigateToLogin = {&#10;                    navController.navigate(Route.Login.route) {&#10;                        popUpTo(Route.Register.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onRegisterSuccess = {&#10;                    navController.navigate(Route.Login.route) {&#10;                        popUpTo(Route.Register.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        //  MAIN CLIENTE&#10;        composable(Route.MainCliente.route) {&#10;            val clientId = loggedUser?.id ?: 0L&#10;&#10;            Main(&#10;                clientId = clientId,&#10;                loginViewModel = loginViewModel,&#10;                onTapEquipmentCard = { equipmentId -&gt;&#10;                    navController.navigate(&quot;${Route.EquipmentDetail.route}/$equipmentId&quot;)&#10;                }&#10;            )&#10;        }&#10;&#10;        //  MAIN PROVEEDOR&#10;        composable(Route.MainProveedor.route) {&#10;            val providerId = loggedUser?.id ?: 0L&#10;&#10;            MainProveedor(&#10;                providerId = providerId,&#10;                loginViewModel = loginViewModel,&#10;                onTapServiceRequest = { serviceRequestId -&gt; //  Cambio aquí&#10;                    // TODO: Navegar a detalle de solicitud cuando lo crees&#10;                    navController.navigate(&quot;${Route.ServiceRequestDetail.route}/$serviceRequestId&quot;)&#10;                }&#10;            )&#10;        }&#10;&#10;        //  DETALLE DE EQUIPO&#10;        composable(&#10;            route = Route.EquipmentDetail.routeWithArgument,&#10;            arguments = listOf(&#10;                navArgument(Route.EquipmentDetail.argument) { type = NavType.LongType }&#10;            )&#10;        ) { navBackStackEntry -&gt;&#10;            val equipmentId = navBackStackEntry.arguments?.getLong(Route.EquipmentDetail.argument)&#10;            val equipmentDetailViewModel: EquipmentDetailViewModel = hiltViewModel()&#10;&#10;            equipmentId?.let {&#10;                equipmentDetailViewModel.getEquipmentById(it)&#10;                EquipmentDetail(equipmentDetailViewModel)&#10;            }&#10;        }&#10;&#10;        //  SERVICIOS DEL CLIENTE&#10;        composable(Route.ServiceRequests.route) {&#10;            val clientId = loggedUser?.id ?: 0L&#10;            ServiceRequestScreen(clientId = clientId)&#10;        }&#10;&#10;        //  DETALLE DE SOLICITUD DE SERVICIO (PROVEEDOR)&#10;        composable(&#10;            route = Route.ServiceRequestDetail.routeWithArgument,&#10;            arguments = listOf(&#10;                navArgument(Route.ServiceRequestDetail.argument) { type = NavType.LongType }&#10;            )&#10;        ) { navBackStackEntry -&gt;&#10;            val serviceRequestId = navBackStackEntry.arguments?.getLong(Route.ServiceRequestDetail.argument)&#10;&#10;            serviceRequestId?.let {&#10;                // TODO: Crear ServiceRequestDetailScreen cuando lo necesites&#10;                // ServiceRequestDetailScreen(serviceRequestId = it)&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true)&#10;@Composable&#10;fun AppNavigationPreview() {&#10;    PolarNetTheme {&#10;        AppNavigation()&#10;    }&#10;}" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.core.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.ui.tooling.preview.Preview&#10;import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.navArgument&#10;import pe.edu.upc.polarnet.core.root.Main&#10;import pe.edu.upc.polarnet.core.root.MainProveedor&#10;import pe.edu.upc.polarnet.core.ui.theme.PolarNetTheme&#10;import pe.edu.upc.polarnet.features.auth.presentation.login.Login&#10;import pe.edu.upc.polarnet.features.auth.presentation.login.LoginViewModel&#10;import pe.edu.upc.polarnet.features.auth.presentation.register.Register&#10;import pe.edu.upc.polarnet.features.auth.presentation.register.RegisterViewModel&#10;import pe.edu.upc.polarnet.features.client.home.presentation.equipmentdetail.EquipmentDetail&#10;import pe.edu.upc.polarnet.features.client.home.presentation.equipmentdetail.EquipmentDetailViewModel&#10;import pe.edu.upc.polarnet.features.client.services.presentation.serviceRequest.ServiceRequestScreen&#10;&#10;@Composable&#10;fun AppNavigation() {&#10;    val navController = rememberNavController()&#10;&#10;    val loginViewModel: LoginViewModel = hiltViewModel()&#10;&#10;    val registerViewModel: RegisterViewModel = hiltViewModel()&#10;&#10;    val loggedUser = loginViewModel.loggedUser.collectAsState().value&#10;&#10;    NavHost(navController, startDestination = Route.Login.route) {&#10;&#10;        //  LOGIN SCREEN&#10;        composable(Route.Login.route) {&#10;            Login(&#10;                viewModel = loginViewModel,&#10;                onLoginCliente = {&#10;                    navController.navigate(Route.MainCliente.route) {&#10;                        popUpTo(Route.Login.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onLoginProveedor = {&#10;                    navController.navigate(Route.MainProveedor.route) {&#10;                        popUpTo(Route.Login.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToRegister = {&#10;                    navController.navigate(Route.Register.route)&#10;                }&#10;            )&#10;        }&#10;        //  REGISTER SCREEN&#10;        composable(Route.Register.route) {&#10;            Register(&#10;                viewModel = registerViewModel,&#10;                onNavigateToLogin = {&#10;                    navController.navigate(Route.Login.route) {&#10;                        popUpTo(Route.Register.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onRegisterSuccess = {&#10;                    navController.navigate(Route.Login.route) {&#10;                        popUpTo(Route.Register.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        //  MAIN CLIENTE&#10;        composable(Route.MainCliente.route) {&#10;            val clientId = loggedUser?.id ?: 0L&#10;&#10;            Main(&#10;                clientId = clientId,&#10;                loginViewModel = loginViewModel,&#10;                onTapEquipmentCard = { equipmentId -&gt;&#10;                    navController.navigate(&quot;${Route.EquipmentDetail.route}/$equipmentId&quot;)&#10;                }&#10;            )&#10;        }&#10;&#10;        //  MAIN PROVEEDOR&#10;        composable(Route.MainProveedor.route) {&#10;            val providerId = loggedUser?.id ?: 0L&#10;&#10;            MainProveedor(&#10;                providerId = providerId,&#10;                loginViewModel = loginViewModel,&#10;                onTapServiceRequest = { serviceRequestId -&gt; //  Cambio aquí&#10;                    // TODO: Navegar a detalle de solicitud cuando lo crees&#10;                    navController.navigate(&quot;${Route.ServiceRequestDetail.route}/$serviceRequestId&quot;)&#10;                }&#10;            )&#10;        }&#10;&#10;        //  DETALLE DE EQUIPO&#10;        composable(&#10;            route = Route.EquipmentDetail.routeWithArgument,&#10;            arguments = listOf(&#10;                navArgument(Route.EquipmentDetail.argument) { type = NavType.LongType }&#10;            )&#10;        ) { navBackStackEntry -&gt;&#10;            val equipmentId = navBackStackEntry.arguments?.getLong(Route.EquipmentDetail.argument)&#10;            val equipmentDetailViewModel: EquipmentDetailViewModel = hiltViewModel()&#10;            val clientId = loggedUser?.id ?: 0L&#10;&#10;            android.util.Log.d(&quot;AppNavigation&quot;, &quot;=== DETALLE DE EQUIPO ===&quot;)&#10;            android.util.Log.d(&quot;AppNavigation&quot;, &quot;Usuario logueado: ${loggedUser?.fullName} (ID: ${loggedUser?.id})&quot;)&#10;            android.util.Log.d(&quot;AppNavigation&quot;, &quot;Email: ${loggedUser?.email}&quot;)&#10;            android.util.Log.d(&quot;AppNavigation&quot;, &quot;ClientId que se pasará: $clientId&quot;)&#10;&#10;            equipmentId?.let {&#10;                equipmentDetailViewModel.getEquipmentById(it)&#10;                EquipmentDetail(&#10;                    viewModel = equipmentDetailViewModel,&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    clientId = clientId&#10;                )&#10;            }&#10;        }&#10;&#10;        //  SERVICIOS DEL CLIENTE&#10;        composable(Route.ServiceRequests.route) {&#10;            val clientId = loggedUser?.id ?: 0L&#10;            ServiceRequestScreen(clientId = clientId)&#10;        }&#10;&#10;        //  DETALLE DE SOLICITUD DE SERVICIO (PROVEEDOR)&#10;        composable(&#10;            route = Route.ServiceRequestDetail.routeWithArgument,&#10;            arguments = listOf(&#10;                navArgument(Route.ServiceRequestDetail.argument) { type = NavType.LongType }&#10;            )&#10;        ) { navBackStackEntry -&gt;&#10;            val serviceRequestId = navBackStackEntry.arguments?.getLong(Route.ServiceRequestDetail.argument)&#10;&#10;            serviceRequestId?.let {&#10;                // TODO: Crear ServiceRequestDetailScreen cuando lo necesites&#10;                // ServiceRequestDetailScreen(serviceRequestId = it)&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Preview(showBackground = true)&#10;@Composable&#10;fun AppNavigationPreview() {&#10;    PolarNetTheme {&#10;        AppNavigation()&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/auth/data/models/UserDetailDto.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/auth/data/models/UserDetailDto.kt" />
              <option name="originalContent" value="package pe.edu.upc.polarnet.features.auth.data.models&#10;&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;import kotlinx.serialization.Transient&#10;&#10;@Serializable&#10;data class UserDetailDto(&#10;    @Transient&#10;    val id: Long? = null,&#10;    @SerialName(&quot;full_name&quot;)&#10;    val fullName: String,&#10;    val email: String,&#10;    val password: String,&#10;    val role: String,&#10;    @SerialName(&quot;company_name&quot;)&#10;    val company: String? = null,&#10;    val phone: String? = null,&#10;    val location: String? = null,&#10;    @SerialName(&quot;created_at&quot;)&#10;    val createdAt: String? = null&#10;)&#10;" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.auth.data.models&#10;&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;&#10;@Serializable&#10;data class UserDetailDto(&#10;    @SerialName(&quot;id&quot;)&#10;    val id: Long? = null,&#10;    @SerialName(&quot;full_name&quot;)&#10;    val fullName: String,&#10;    @SerialName(&quot;email&quot;)&#10;    val email: String,&#10;    @SerialName(&quot;password&quot;)&#10;    val password: String,&#10;    @SerialName(&quot;role&quot;)&#10;    val role: String,&#10;    @SerialName(&quot;company_name&quot;)&#10;    val company: String? = null,&#10;    @SerialName(&quot;phone&quot;)&#10;    val phone: String? = null,&#10;    @SerialName(&quot;location&quot;)&#10;    val location: String? = null,&#10;    @SerialName(&quot;created_at&quot;)&#10;    val createdAt: String? = null&#10;)&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/auth/data/repositories/AuthRepositoryImpl.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/auth/data/repositories/AuthRepositoryImpl.kt" />
              <option name="originalContent" value="package pe.edu.upc.polarnet.features.auth.data.repositories&#10;&#10;import io.github.jan.supabase.postgrest.from&#10;import io.github.jan.supabase.postgrest.query.Columns&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import pe.edu.upc.polarnet.core.networking.SupabaseClient&#10;import pe.edu.upc.polarnet.features.auth.data.models.UserDetailDto&#10;import pe.edu.upc.polarnet.features.auth.domain.models.User&#10;import pe.edu.upc.polarnet.features.auth.domain.models.UserRole&#10;import pe.edu.upc.polarnet.features.auth.domain.repositories.AuthRepository&#10;import javax.inject.Inject //  AÑADE ESTO&#10;&#10;class AuthRepositoryImpl @Inject constructor( //  AÑADE ESTO&#10;) : AuthRepository {&#10;&#10;    private val supabase = SupabaseClient.client&#10;&#10;    override suspend fun login(email: String, password: String): User? =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                println(&quot; Intentando login con email: $email&quot;)&#10;                println(&quot; URL Supabase: ${supabase.supabaseUrl}&quot;)&#10;&#10;                val users = supabase&#10;                    .from(&quot;users&quot;)&#10;                    .select(columns = Columns.ALL) {&#10;                        filter { eq(&quot;email&quot;, email) }&#10;                    }&#10;                    .decodeList&lt;UserDetailDto&gt;()&#10;&#10;                if (users.isEmpty()) return@withContext null&#10;&#10;                val userDto = users.first()&#10;                if (userDto.password != password) return@withContext null&#10;&#10;                println(&quot;✅ Login exitoso para: ${userDto.fullName}&quot;)&#10;&#10;                User(&#10;                    id = userDto.id,&#10;                    fullName = userDto.fullName,&#10;                    email = userDto.email,&#10;                    password = password,&#10;                    role = UserRole.fromString(userDto.role),&#10;                    companyName = userDto.company,&#10;                    phone = userDto.phone,&#10;                    location = userDto.location,&#10;                    createdAt = userDto.createdAt&#10;                )&#10;            } catch (e: Exception) {&#10;                println(&quot; Error en login: ${e.message}&quot;)&#10;                e.printStackTrace()&#10;                null&#10;            }&#10;        }&#10;&#10;    override suspend fun register(&#10;        email: String,&#10;        password: String,&#10;        fullName: String,&#10;        role: UserRole,&#10;        companyName: String?,&#10;        phone: String?,&#10;        location: String?&#10;    ): User? =&#10;        withContext(Dispatchers.IO) {&#10;            try {&#10;                println(&quot; Intentando registrar usuario con email: $email como ${role.name}&quot;)&#10;&#10;                // Verificar si el email ya existe&#10;                val existingUsers = supabase&#10;                    .from(&quot;users&quot;)&#10;                    .select(columns = Columns.ALL) {&#10;                        filter { eq(&quot;email&quot;, email) }&#10;                    }&#10;                    .decodeList&lt;UserDetailDto&gt;()&#10;&#10;                if (existingUsers.isNotEmpty()) {&#10;                    println(&quot;⚠️ El email ya está registrado&quot;)&#10;                    return@withContext null&#10;                }&#10;&#10;                // Crear nuevo usuario con todos los campos&#10;                val newUserDto = UserDetailDto(&#10;                    id = null, // Se auto-genera en la BD&#10;                    fullName = fullName,&#10;                    email = email,&#10;                    password = password,&#10;                    role = role.name.lowercase(),&#10;                    company = companyName,&#10;                    phone = phone,&#10;                    location = location,&#10;                    createdAt = null&#10;                )&#10;&#10;                val insertedUser = supabase&#10;                    .from(&quot;users&quot;)&#10;                    .insert(newUserDto) {&#10;                        select()&#10;                    }&#10;                    .decodeSingle&lt;UserDetailDto&gt;()&#10;&#10;                println(&quot;✅ Usuario registrado exitosamente: ${insertedUser.fullName} como ${insertedUser.role}&quot;)&#10;&#10;                User(&#10;                    id = insertedUser.id,&#10;                    fullName = insertedUser.fullName,&#10;                    email = insertedUser.email,&#10;                    password = password,&#10;                    role = UserRole.fromString(insertedUser.role),&#10;                    companyName = insertedUser.company,&#10;                    phone = insertedUser.phone,&#10;                    location = insertedUser.location,&#10;                    createdAt = insertedUser.createdAt&#10;                )&#10;            } catch (e: Exception) {&#10;                println(&quot; Error en registro: ${e.message}&quot;)&#10;                e.printStackTrace()&#10;                null&#10;            }&#10;        }&#10;}&#10;" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.auth.data.repositories&#13;&#10;&#13;&#10;import io.github.jan.supabase.postgrest.from&#13;&#10;import io.github.jan.supabase.postgrest.query.Columns&#13;&#10;import kotlinx.coroutines.Dispatchers&#13;&#10;import kotlinx.coroutines.withContext&#13;&#10;import pe.edu.upc.polarnet.core.networking.SupabaseClient&#13;&#10;import pe.edu.upc.polarnet.features.auth.data.models.UserDetailDto&#13;&#10;import pe.edu.upc.polarnet.features.auth.domain.models.User&#13;&#10;import pe.edu.upc.polarnet.features.auth.domain.models.UserRole&#13;&#10;import pe.edu.upc.polarnet.features.auth.domain.repositories.AuthRepository&#13;&#10;import javax.inject.Inject //  AÑADE ESTO&#13;&#10;&#13;&#10;class AuthRepositoryImpl @Inject constructor( //  AÑADE ESTO&#13;&#10;) : AuthRepository {&#13;&#10;&#13;&#10;    private val supabase = SupabaseClient.client&#13;&#10;&#13;&#10;    override suspend fun login(email: String, password: String): User? =&#13;&#10;        withContext(Dispatchers.IO) {&#13;&#10;            try {&#13;&#10;                println(&quot; Intentando login con email: $email&quot;)&#13;&#10;                println(&quot; URL Supabase: ${supabase.supabaseUrl}&quot;)&#13;&#10;&#13;&#10;                val users = supabase&#13;&#10;                    .from(&quot;users&quot;)&#13;&#10;                    .select(columns = Columns.ALL) {&#13;&#10;                        filter { eq(&quot;email&quot;, email) }&#13;&#10;                    }&#13;&#10;                    .decodeList&lt;UserDetailDto&gt;()&#13;&#10;&#13;&#10;                if (users.isEmpty()) return@withContext null&#13;&#10;&#13;&#10;                val userDto = users.first()&#10;                if (userDto.password != password) return@withContext null&#10;&#10;                println(&quot;✅ Login exitoso para: ${userDto.fullName}&quot;)&#10;                println(&quot; ID del usuario: ${userDto.id}&quot;)&#10;                println(&quot; Email: ${userDto.email}&quot;)&#10;                println(&quot; Role: ${userDto.role}&quot;)&#10;&#10;                val user = User(&#10;                    id = userDto.id,&#10;                    fullName = userDto.fullName,&#10;                    email = userDto.email,&#10;                    password = password,&#10;                    role = UserRole.fromString(userDto.role),&#10;                    companyName = userDto.company,&#10;                    phone = userDto.phone,&#10;                    location = userDto.location,&#10;                    createdAt = userDto.createdAt&#10;                )&#10;                &#10;                println(&quot; User object creado con ID: ${user.id}&quot;)&#10;                user&#13;&#10;            } catch (e: Exception) {&#13;&#10;                println(&quot; Error en login: ${e.message}&quot;)&#13;&#10;                e.printStackTrace()&#13;&#10;                null&#13;&#10;            }&#13;&#10;        }&#13;&#10;&#13;&#10;    override suspend fun register(&#13;&#10;        email: String,&#13;&#10;        password: String,&#13;&#10;        fullName: String,&#13;&#10;        role: UserRole,&#13;&#10;        companyName: String?,&#13;&#10;        phone: String?,&#13;&#10;        location: String?&#13;&#10;    ): User? =&#13;&#10;        withContext(Dispatchers.IO) {&#13;&#10;            try {&#13;&#10;                println(&quot; Intentando registrar usuario con email: $email como ${role.name}&quot;)&#13;&#10;&#13;&#10;                // Verificar si el email ya existe&#13;&#10;                val existingUsers = supabase&#13;&#10;                    .from(&quot;users&quot;)&#13;&#10;                    .select(columns = Columns.ALL) {&#13;&#10;                        filter { eq(&quot;email&quot;, email) }&#13;&#10;                    }&#13;&#10;                    .decodeList&lt;UserDetailDto&gt;()&#13;&#10;&#13;&#10;                if (existingUsers.isNotEmpty()) {&#13;&#10;                    println(&quot;⚠️ El email ya está registrado&quot;)&#13;&#10;                    return@withContext null&#13;&#10;                }&#13;&#10;&#13;&#10;                // Crear nuevo usuario con todos los campos&#13;&#10;                val newUserDto = UserDetailDto(&#13;&#10;                    id = null, // Se auto-genera en la BD&#13;&#10;                    fullName = fullName,&#13;&#10;                    email = email,&#13;&#10;                    password = password,&#13;&#10;                    role = role.name.lowercase(),&#13;&#10;                    company = companyName,&#13;&#10;                    phone = phone,&#13;&#10;                    location = location,&#13;&#10;                    createdAt = null&#13;&#10;                )&#13;&#10;&#13;&#10;                val insertedUser = supabase&#13;&#10;                    .from(&quot;users&quot;)&#13;&#10;                    .insert(newUserDto) {&#13;&#10;                        select()&#13;&#10;                    }&#13;&#10;                    .decodeSingle&lt;UserDetailDto&gt;()&#13;&#10;&#13;&#10;                println(&quot;✅ Usuario registrado exitosamente: ${insertedUser.fullName} como ${insertedUser.role}&quot;)&#13;&#10;&#13;&#10;                User(&#13;&#10;                    id = insertedUser.id,&#13;&#10;                    fullName = insertedUser.fullName,&#13;&#10;                    email = insertedUser.email,&#13;&#10;                    password = password,&#13;&#10;                    role = UserRole.fromString(insertedUser.role),&#13;&#10;                    companyName = insertedUser.company,&#13;&#10;                    phone = insertedUser.phone,&#13;&#10;                    location = insertedUser.location,&#13;&#10;                    createdAt = insertedUser.createdAt&#13;&#10;                )&#13;&#10;            } catch (e: Exception) {&#13;&#10;                println(&quot; Error en registro: ${e.message}&quot;)&#13;&#10;                e.printStackTrace()&#13;&#10;                null&#13;&#10;            }&#13;&#10;        }&#13;&#10;}&#13;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/home/presentation/equipmentdetail/EquipmentDetail.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/home/presentation/equipmentdetail/EquipmentDetail.kt" />
              <option name="originalContent" value="package pe.edu.upc.polarnet.features.client.home.presentation.equipmentdetail&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel&#10;import coil3.compose.AsyncImage&#10;import pe.edu.upc.polarnet.core.ui.theme.polarNetColors&#10;&#10;@Composable&#10;fun EquipmentDetail(&#10;    viewModel: EquipmentDetailViewModel = hiltViewModel(),&#10;    onNavigateBack: () -&gt; Unit = {},&#10;    clientId: Long&#10;) {&#10;    val equipment by viewModel.equipment.collectAsState()&#10;    var rentalMonths by remember { mutableIntStateOf(1) }&#10;    var showRentalDialog by remember { mutableStateOf(false) }&#10;    val colors = MaterialTheme.polarNetColors&#10;&#10;    val isLoading by viewModel.isLoading.collectAsState()&#10;    val rentalSuccess by viewModel.rentalSuccess.collectAsState()&#10;    val errorMessage by viewModel.errorMessage.collectAsState()&#10;&#10;    // Mostrar mensaje de éxito&#10;    LaunchedEffect(rentalSuccess) {&#10;        if (rentalSuccess) {&#10;            android.util.Log.d(&quot;EquipmentDetail&quot;, &quot;✅ Renta creada exitosamente&quot;)&#10;        }&#10;    }&#10;&#10;    // Mostrar error si existe&#10;    LaunchedEffect(errorMessage) {&#10;        errorMessage?.let {&#10;            android.util.Log.e(&quot;EquipmentDetail&quot;, &quot;❌ Error: $it&quot;)&#10;        }&#10;    }&#10;&#10;    equipment?.let { equip -&gt;&#10;        Scaffold(&#10;            floatingActionButton = {&#10;                ExtendedFloatingActionButton(&#10;                    onClick = { showRentalDialog = true },&#10;                    containerColor = MaterialTheme.colorScheme.primary,&#10;                    contentColor = MaterialTheme.colorScheme.onPrimary&#10;                ) {&#10;                    Icon(Icons.Default.CalendarMonth, contentDescription = null)&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&#10;                        text = &quot;Rentar Equipo&quot;,&#10;                        fontWeight = FontWeight.SemiBold&#10;                    )&#10;                }&#10;            },&#10;            floatingActionButtonPosition = FabPosition.Center&#10;        ) { paddingValues -&gt;&#10;&#10;            // Diálogo de confirmación de renta&#10;            if (showRentalDialog) {&#10;                RentalDialog(&#10;                    equipmentName = equip.name,&#10;                    pricePerMonth = equip.pricePerMonth,&#10;                    rentalMonths = rentalMonths,&#10;                    onRentalMonthsChange = { rentalMonths = it },&#10;                    onConfirm = {&#10;                        viewModel.createRentalRequest(&#10;                            clientId = clientId,&#10;                            equipmentId = equip.id,&#10;                            rentalMonths = rentalMonths,&#10;                            pricePerMonth = equip.pricePerMonth&#10;                        )&#10;                        showRentalDialog = false&#10;                    },&#10;                    onDismiss = { showRentalDialog = false },&#10;                    isLoading = isLoading&#10;                )&#10;            }&#10;&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .background(MaterialTheme.colorScheme.background)&#10;                    .verticalScroll(rememberScrollState())&#10;                    .padding(paddingValues)&#10;            ) {&#10;                // Imagen del equipo&#10;                Box(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(300.dp)&#10;                ) {&#10;                    AsyncImage(&#10;                        model = equip.thumbnail,&#10;                        contentDescription = equip.name,&#10;                        modifier = Modifier.fillMaxSize(),&#10;                        contentScale = ContentScale.Crop&#10;                    )&#10;&#10;                    // Overlay con gradiente&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .fillMaxSize()&#10;                            .background(&#10;                                Brush.verticalGradient(&#10;                                    colors = listOf(&#10;                                        MaterialTheme.colorScheme.background.copy(alpha = 0f),&#10;                                        MaterialTheme.colorScheme.background.copy(alpha = 0.3f)&#10;                                    ),&#10;                                    startY = 0f,&#10;                                    endY = Float.POSITIVE_INFINITY&#10;                                )&#10;                            )&#10;                    )&#10;&#10;                    // Botón de volver&#10;                    IconButton(&#10;                        onClick = onNavigateBack,&#10;                        modifier = Modifier&#10;                            .padding(16.dp)&#10;                            .align(Alignment.TopStart)&#10;                            .background(&#10;                                MaterialTheme.colorScheme.surface.copy(alpha = 0.9f),&#10;                                CircleShape&#10;                            )&#10;                    ) {&#10;                        Icon(&#10;                            Icons.Default.ArrowBack,&#10;                            contentDescription = &quot;Volver&quot;,&#10;                            tint = MaterialTheme.colorScheme.onSurface&#10;                        )&#10;                    }&#10;                }&#10;&#10;                // Contenido principal&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(20.dp),&#10;                    verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                ) {&#10;                    // Nombre y precio&#10;                    Row(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.SpaceBetween,&#10;                        verticalAlignment = Alignment.Top&#10;                    ) {&#10;                        Column(modifier = Modifier.weight(1f)) {&#10;                            Text(&#10;                                text = equip.name,&#10;                                style = MaterialTheme.typography.headlineMedium,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = MaterialTheme.colorScheme.onBackground&#10;                            )&#10;&#10;                            Row(&#10;                                verticalAlignment = Alignment.CenterVertically,&#10;                                horizontalArrangement = Arrangement.spacedBy(4.dp),&#10;                                modifier = Modifier.padding(top = 4.dp)&#10;                            ) {&#10;                                Icon(&#10;                                    Icons.Default.CheckCircle,&#10;                                    contentDescription = null,&#10;                                    modifier = Modifier.size(16.dp),&#10;                                    tint = colors.success.color&#10;                                )&#10;                                Text(&#10;                                    text = &quot;Disponible&quot;,&#10;                                    style = MaterialTheme.typography.bodySmall,&#10;                                    color = colors.success.color,&#10;                                    fontWeight = FontWeight.Medium&#10;                                )&#10;                            }&#10;                        }&#10;&#10;                        Surface(&#10;                            shape = RoundedCornerShape(12.dp),&#10;                            color = MaterialTheme.colorScheme.primaryContainer&#10;                        ) {&#10;                            Column(&#10;                                modifier = Modifier.padding(12.dp),&#10;                                horizontalAlignment = Alignment.End&#10;                            ) {&#10;                                Text(&#10;                                    text = &quot;Precio/mes&quot;,&#10;                                    style = MaterialTheme.typography.labelSmall,&#10;                                    color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                                )&#10;                                Text(&#10;                                    text = &quot;S/ %.2f&quot;.format(equip.pricePerMonth),&#10;                                    style = MaterialTheme.typography.titleLarge,&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;&#10;                    HorizontalDivider()&#10;&#10;                    // Sección de meses de renta&#10;                    Card(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.surfaceContainerLow&#10;                        ),&#10;                        shape = RoundedCornerShape(16.dp)&#10;                    ) {&#10;                        Row(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(16.dp),&#10;                            horizontalArrangement = Arrangement.SpaceBetween,&#10;                            verticalAlignment = Alignment.CenterVertically&#10;                        ) {&#10;                            Column {&#10;                                Text(&#10;                                    text = &quot;Duración de Renta&quot;,&#10;                                    style = MaterialTheme.typography.titleMedium,&#10;                                    fontWeight = FontWeight.SemiBold,&#10;                                    color = MaterialTheme.colorScheme.onSurface&#10;                                )&#10;                                Text(&#10;                                    text = &quot;S/ ${String.format(java.util.Locale.getDefault(), &quot;%.2f&quot;, equip.pricePerMonth)}/mes&quot;,&#10;                                    style = MaterialTheme.typography.bodySmall,&#10;                                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                                )&#10;                            }&#10;&#10;                            Row(&#10;                                verticalAlignment = Alignment.CenterVertically,&#10;                                horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                            ) {&#10;                                // Botón decrementar&#10;                                FilledIconButton(&#10;                                    onClick = { if (rentalMonths &gt; 1) rentalMonths-- },&#10;                                    modifier = Modifier.size(40.dp),&#10;                                    colors = IconButtonDefaults.filledIconButtonColors(&#10;                                        containerColor = MaterialTheme.colorScheme.secondaryContainer,&#10;                                        contentColor = MaterialTheme.colorScheme.onSecondaryContainer&#10;                                    )&#10;                                ) {&#10;                                    Icon(&#10;                                        Icons.Default.Remove,&#10;                                        contentDescription = &quot;Disminuir&quot;,&#10;                                        modifier = Modifier.size(20.dp)&#10;                                    )&#10;                                }&#10;&#10;                                // Meses&#10;                                Surface(&#10;                                    shape = RoundedCornerShape(8.dp),&#10;                                    color = MaterialTheme.colorScheme.surface,&#10;                                    modifier = Modifier.width(80.dp)&#10;                                ) {&#10;                                    Column(&#10;                                        modifier = Modifier.padding(vertical = 8.dp, horizontal = 4.dp),&#10;                                        horizontalAlignment = Alignment.CenterHorizontally&#10;                                    ) {&#10;                                        Text(&#10;                                            text = rentalMonths.toString(),&#10;                                            style = MaterialTheme.typography.titleLarge,&#10;                                            fontWeight = FontWeight.Bold,&#10;                                            color = MaterialTheme.colorScheme.onSurface&#10;                                        )&#10;                                        Text(&#10;                                            text = if (rentalMonths == 1) &quot;mes&quot; else &quot;meses&quot;,&#10;                                            style = MaterialTheme.typography.labelSmall,&#10;                                            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                                        )&#10;                                    }&#10;                                }&#10;&#10;                                // Botón incrementar&#10;                                FilledIconButton(&#10;                                    onClick = { rentalMonths++ },&#10;                                    modifier = Modifier.size(40.dp),&#10;                                    colors = IconButtonDefaults.filledIconButtonColors(&#10;                                        containerColor = MaterialTheme.colorScheme.primary,&#10;                                        contentColor = MaterialTheme.colorScheme.onPrimary&#10;                                    )&#10;                                ) {&#10;                                    Icon(&#10;                                        Icons.Default.Add,&#10;                                        contentDescription = &quot;Aumentar&quot;,&#10;                                        modifier = Modifier.size(20.dp)&#10;                                    )&#10;                                }&#10;                            }&#10;                        }&#10;                    }&#10;&#10;                    // Información del producto&#10;                    Card(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.surfaceContainerLow&#10;                        ),&#10;                        shape = RoundedCornerShape(16.dp)&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(16.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;Detalles del Producto&quot;,&#10;                                style = MaterialTheme.typography.titleMedium,&#10;                                fontWeight = FontWeight.SemiBold,&#10;                                color = MaterialTheme.colorScheme.onSurface&#10;                            )&#10;&#10;                            DetailRow(&#10;                                icon = Icons.Default.Category,&#10;                                label = &quot;Categoría&quot;,&#10;                                value = equip.category&#10;                            )&#10;&#10;                            DetailRow(&#10;                                icon = Icons.Default.Inventory,&#10;                                label = &quot;Stock&quot;,&#10;                                value = if (equip.available) &quot;Disponible&quot; else &quot;No disponible&quot;&#10;                            )&#10;&#10;                            DetailRow(&#10;                                icon = Icons.Default.LocalShipping,&#10;                                label = &quot;Ubicación&quot;,&#10;                                value = equip.location ?: &quot;Lima, Perú&quot;&#10;                            )&#10;&#10;                            DetailRow(&#10;                                icon = Icons.Default.Verified,&#10;                                label = &quot;Marca&quot;,&#10;                                value = equip.brand ?: &quot;N/A&quot;&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    // Resumen de renta&#10;                    Card(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.tertiaryContainer&#10;                        ),&#10;                        shape = RoundedCornerShape(16.dp)&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(16.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(8.dp)&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;Resumen de Renta&quot;,&#10;                                style = MaterialTheme.typography.titleMedium,&#10;                                fontWeight = FontWeight.SemiBold,&#10;                                color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                            )&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween&#10;                            ) {&#10;                                Text(&#10;                                    text = &quot;Precio por mes&quot;,&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                                Text(&#10;                                    text = &quot;S/ %.2f&quot;.format(equip.pricePerMonth),&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    fontWeight = FontWeight.Medium,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                            }&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween&#10;                            ) {&#10;                                Text(&#10;                                    text = &quot;Duración&quot;,&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                                Text(&#10;                                    text = &quot;$rentalMonths ${if (rentalMonths == 1) &quot;mes&quot; else &quot;meses&quot;}&quot;,&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    fontWeight = FontWeight.Medium,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                            }&#10;&#10;                            HorizontalDivider(&#10;                                color = MaterialTheme.colorScheme.onTertiaryContainer.copy(alpha = 0.3f)&#10;                            )&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween,&#10;                                verticalAlignment = Alignment.Bottom&#10;                            ) {&#10;                                Column {&#10;                                    Text(&#10;                                        text = &quot;Total a Pagar&quot;,&#10;                                        style = MaterialTheme.typography.titleLarge,&#10;                                        fontWeight = FontWeight.Bold,&#10;                                        color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                    )&#10;                                    Text(&#10;                                        text = &quot;Por $rentalMonths ${if (rentalMonths == 1) &quot;mes&quot; else &quot;meses&quot;}&quot;,&#10;                                        style = MaterialTheme.typography.bodySmall,&#10;                                        color = MaterialTheme.colorScheme.onTertiaryContainer.copy(alpha = 0.7f)&#10;                                    )&#10;                                }&#10;                                Text(&#10;                                    text = &quot;S/ %.2f&quot;.format(equip.pricePerMonth * rentalMonths),&#10;                                    style = MaterialTheme.typography.headlineMedium,&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;&#10;                    // Espacio para el FAB&#10;                    Spacer(modifier = Modifier.height(80.dp))&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun DetailRow(&#10;    icon: androidx.compose.ui.graphics.vector.ImageVector,&#10;    label: String,&#10;    value: String&#10;) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Icon(&#10;            icon,&#10;            contentDescription = null,&#10;            modifier = Modifier.size(20.dp),&#10;            tint = MaterialTheme.colorScheme.primary&#10;        )&#10;        Column(modifier = Modifier.weight(1f)) {&#10;            Text(&#10;                text = label,&#10;                style = MaterialTheme.typography.labelMedium,&#10;                color = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;            Text(&#10;                text = value,&#10;                style = MaterialTheme.typography.bodyMedium,&#10;                fontWeight = FontWeight.Medium,&#10;                color = MaterialTheme.colorScheme.onSurface&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun RentalDialog(&#10;    equipmentName: String,&#10;    pricePerMonth: Double,&#10;    rentalMonths: Int,&#10;    onRentalMonthsChange: (Int) -&gt; Unit,&#10;    onConfirm: () -&gt; Unit,&#10;    onDismiss: () -&gt; Unit,&#10;    isLoading: Boolean&#10;) {&#10;    AlertDialog(&#10;        onDismissRequest = { if (!isLoading) onDismiss() },&#10;        icon = {&#10;            Icon(&#10;                Icons.Default.CalendarMonth,&#10;                contentDescription = null,&#10;                tint = MaterialTheme.colorScheme.primary,&#10;                modifier = Modifier.size(32.dp)&#10;            )&#10;        },&#10;        title = {&#10;            Text(&#10;                text = &quot;Confirmar Renta&quot;,&#10;                style = MaterialTheme.typography.titleLarge,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;        },&#10;        text = {&#10;            Column(&#10;                verticalArrangement = Arrangement.spacedBy(16.dp)&#10;            ) {&#10;                Text(&#10;                    text = equipmentName,&#10;                    style = MaterialTheme.typography.bodyLarge,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;&#10;                HorizontalDivider()&#10;&#10;                // Selector de meses&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Text(&#10;                        text = &quot;Duración:&quot;,&#10;                        style = MaterialTheme.typography.bodyMedium&#10;                    )&#10;&#10;                    Row(&#10;                        verticalAlignment = Alignment.CenterVertically,&#10;                        horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                    ) {&#10;                        IconButton(&#10;                            onClick = { if (rentalMonths &gt; 1) onRentalMonthsChange(rentalMonths - 1) },&#10;                            enabled = !isLoading &amp;&amp; rentalMonths &gt; 1&#10;                        ) {&#10;                            Icon(Icons.Default.Remove, contentDescription = &quot;Disminuir&quot;)&#10;                        }&#10;&#10;                        Surface(&#10;                            shape = RoundedCornerShape(8.dp),&#10;                            color = MaterialTheme.colorScheme.surfaceContainerHighest,&#10;                            modifier = Modifier.widthIn(min = 60.dp)&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;$rentalMonths ${if (rentalMonths == 1) &quot;mes&quot; else &quot;meses&quot;}&quot;,&#10;                                style = MaterialTheme.typography.titleMedium,&#10;                                fontWeight = FontWeight.Bold,&#10;                                modifier = Modifier.padding(horizontal = 12.dp, vertical = 8.dp),&#10;                                textAlign = androidx.compose.ui.text.style.TextAlign.Center&#10;                            )&#10;                        }&#10;&#10;                        IconButton(&#10;                            onClick = { onRentalMonthsChange(rentalMonths + 1) },&#10;                            enabled = !isLoading&#10;                        ) {&#10;                            Icon(Icons.Default.Add, contentDescription = &quot;Aumentar&quot;)&#10;                        }&#10;                    }&#10;                }&#10;&#10;                // Resumen&#10;                Card(&#10;                    colors = CardDefaults.cardColors(&#10;                        containerColor = MaterialTheme.colorScheme.primaryContainer&#10;                    ),&#10;                    shape = RoundedCornerShape(12.dp)&#10;                ) {&#10;                    Column(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .padding(12.dp),&#10;                        verticalArrangement = Arrangement.spacedBy(8.dp)&#10;                    ) {&#10;                        Row(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalArrangement = Arrangement.SpaceBetween&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;Precio/mes:&quot;,&#10;                                style = MaterialTheme.typography.bodyMedium,&#10;                                color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                            )&#10;                            Text(&#10;                                text = &quot;S/ %.2f&quot;.format(pricePerMonth),&#10;                                style = MaterialTheme.typography.bodyMedium,&#10;                                fontWeight = FontWeight.Medium,&#10;                                color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                            )&#10;                        }&#10;&#10;                        HorizontalDivider(&#10;                            color = MaterialTheme.colorScheme.onPrimaryContainer.copy(alpha = 0.3f)&#10;                        )&#10;&#10;                        Row(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalArrangement = Arrangement.SpaceBetween,&#10;                            verticalAlignment = Alignment.Bottom&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;Total:&quot;,&#10;                                style = MaterialTheme.typography.titleMedium,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                            )&#10;                            Text(&#10;                                text = &quot;S/ %.2f&quot;.format(pricePerMonth * rentalMonths),&#10;                                style = MaterialTheme.typography.titleLarge,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                            )&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        },&#10;        confirmButton = {&#10;            Button(&#10;                onClick = onConfirm,&#10;                enabled = !isLoading&#10;            ) {&#10;                if (isLoading) {&#10;                    CircularProgressIndicator(&#10;                        modifier = Modifier.size(20.dp),&#10;                        color = MaterialTheme.colorScheme.onPrimary,&#10;                        strokeWidth = 2.dp&#10;                    )&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                }&#10;                Text(if (isLoading) &quot;Procesando...&quot; else &quot;Confirmar Renta&quot;)&#10;            }&#10;        },&#10;        dismissButton = {&#10;            TextButton(&#10;                onClick = onDismiss,&#10;                enabled = !isLoading&#10;            ) {&#10;                Text(&quot;Cancelar&quot;)&#10;            }&#10;        }&#10;    )&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.client.home.presentation.equipmentdetail&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.hilt.lifecycle.viewmodel.compose.hiltViewModel&#10;import coil3.compose.AsyncImage&#10;import pe.edu.upc.polarnet.core.ui.theme.polarNetColors&#10;&#10;@Composable&#10;fun EquipmentDetail(&#10;    viewModel: EquipmentDetailViewModel = hiltViewModel(),&#10;    onNavigateBack: () -&gt; Unit = {},&#10;    clientId: Long&#10;) {&#10;    val equipment by viewModel.equipment.collectAsState()&#10;    var rentalMonths by remember { mutableIntStateOf(1) }&#10;    var showRentalDialog by remember { mutableStateOf(false) }&#10;    val colors = MaterialTheme.polarNetColors&#10;&#10;    val isLoading by viewModel.isLoading.collectAsState()&#10;    val rentalSuccess by viewModel.rentalSuccess.collectAsState()&#10;    val errorMessage by viewModel.errorMessage.collectAsState()&#10;&#10;    // Mostrar mensaje de éxito&#10;    LaunchedEffect(rentalSuccess) {&#10;        if (rentalSuccess) {&#10;            android.util.Log.d(&quot;EquipmentDetail&quot;, &quot;✅ Renta creada exitosamente&quot;)&#10;        }&#10;    }&#10;&#10;    // Mostrar error si existe&#10;    LaunchedEffect(errorMessage) {&#10;        errorMessage?.let {&#10;            android.util.Log.e(&quot;EquipmentDetail&quot;, &quot;❌ Error: $it&quot;)&#10;        }&#10;    }&#10;&#10;    equipment?.let { equip -&gt;&#10;        Scaffold(&#10;            floatingActionButton = {&#10;                ExtendedFloatingActionButton(&#10;                    onClick = { showRentalDialog = true },&#10;                    containerColor = MaterialTheme.colorScheme.primary,&#10;                    contentColor = MaterialTheme.colorScheme.onPrimary&#10;                ) {&#10;                    Icon(Icons.Default.CalendarMonth, contentDescription = null)&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                    Text(&#10;                        text = &quot;Rentar Equipo&quot;,&#10;                        fontWeight = FontWeight.SemiBold&#10;                    )&#10;                }&#10;            },&#10;            floatingActionButtonPosition = FabPosition.Center&#10;        ) { paddingValues -&gt;&#10;&#10;            // Diálogo de confirmación de renta&#10;            if (showRentalDialog) {&#10;                RentalDialog(&#10;                    equipmentName = equip.name,&#10;                    pricePerMonth = equip.pricePerMonth,&#10;                    rentalMonths = rentalMonths,&#10;                    onRentalMonthsChange = { rentalMonths = it },&#10;                    onConfirm = {&#10;                        android.util.Log.d(&quot;EquipmentDetail&quot;, &quot;====================================&quot;)&#10;                        android.util.Log.d(&quot;EquipmentDetail&quot;, &quot; CONFIRMANDO RENTA&quot;)&#10;                        android.util.Log.d(&quot;EquipmentDetail&quot;, &quot;====================================&quot;)&#10;                        android.util.Log.d(&quot;EquipmentDetail&quot;, &quot; ClientId recibido: $clientId&quot;)&#10;                        android.util.Log.d(&quot;EquipmentDetail&quot;, &quot; EquipmentId: ${equip.id}&quot;)&#10;                        android.util.Log.d(&quot;EquipmentDetail&quot;, &quot; Equipo: ${equip.name}&quot;)&#10;                        &#10;                        viewModel.createRentalRequest(&#10;                            clientId = clientId,&#10;                            equipmentId = equip.id,&#10;                            rentalMonths = rentalMonths,&#10;                            pricePerMonth = equip.pricePerMonth&#10;                        )&#10;                        showRentalDialog = false&#10;                    },&#10;                    onDismiss = { showRentalDialog = false },&#10;                    isLoading = isLoading&#10;                )&#10;            }&#10;&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .background(MaterialTheme.colorScheme.background)&#10;                    .verticalScroll(rememberScrollState())&#10;                    .padding(paddingValues)&#10;            ) {&#10;                // Imagen del equipo&#10;                Box(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(300.dp)&#10;                ) {&#10;                    AsyncImage(&#10;                        model = equip.thumbnail,&#10;                        contentDescription = equip.name,&#10;                        modifier = Modifier.fillMaxSize(),&#10;                        contentScale = ContentScale.Crop&#10;                    )&#10;&#10;                    // Overlay con gradiente&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .fillMaxSize()&#10;                            .background(&#10;                                Brush.verticalGradient(&#10;                                    colors = listOf(&#10;                                        MaterialTheme.colorScheme.background.copy(alpha = 0f),&#10;                                        MaterialTheme.colorScheme.background.copy(alpha = 0.3f)&#10;                                    ),&#10;                                    startY = 0f,&#10;                                    endY = Float.POSITIVE_INFINITY&#10;                                )&#10;                            )&#10;                    )&#10;&#10;                    // Botón de volver&#10;                    IconButton(&#10;                        onClick = onNavigateBack,&#10;                        modifier = Modifier&#10;                            .padding(16.dp)&#10;                            .align(Alignment.TopStart)&#10;                            .background(&#10;                                MaterialTheme.colorScheme.surface.copy(alpha = 0.9f),&#10;                                CircleShape&#10;                            )&#10;                    ) {&#10;                        Icon(&#10;                            Icons.Default.ArrowBack,&#10;                            contentDescription = &quot;Volver&quot;,&#10;                            tint = MaterialTheme.colorScheme.onSurface&#10;                        )&#10;                    }&#10;                }&#10;&#10;                // Contenido principal&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(20.dp),&#10;                    verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                ) {&#10;                    // Nombre y precio&#10;                    Row(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.SpaceBetween,&#10;                        verticalAlignment = Alignment.Top&#10;                    ) {&#10;                        Column(modifier = Modifier.weight(1f)) {&#10;                            Text(&#10;                                text = equip.name,&#10;                                style = MaterialTheme.typography.headlineMedium,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = MaterialTheme.colorScheme.onBackground&#10;                            )&#10;&#10;                            Row(&#10;                                verticalAlignment = Alignment.CenterVertically,&#10;                                horizontalArrangement = Arrangement.spacedBy(4.dp),&#10;                                modifier = Modifier.padding(top = 4.dp)&#10;                            ) {&#10;                                Icon(&#10;                                    Icons.Default.CheckCircle,&#10;                                    contentDescription = null,&#10;                                    modifier = Modifier.size(16.dp),&#10;                                    tint = colors.success.color&#10;                                )&#10;                                Text(&#10;                                    text = &quot;Disponible&quot;,&#10;                                    style = MaterialTheme.typography.bodySmall,&#10;                                    color = colors.success.color,&#10;                                    fontWeight = FontWeight.Medium&#10;                                )&#10;                            }&#10;                        }&#10;&#10;                        Surface(&#10;                            shape = RoundedCornerShape(12.dp),&#10;                            color = MaterialTheme.colorScheme.primaryContainer&#10;                        ) {&#10;                            Column(&#10;                                modifier = Modifier.padding(12.dp),&#10;                                horizontalAlignment = Alignment.End&#10;                            ) {&#10;                                Text(&#10;                                    text = &quot;Precio/mes&quot;,&#10;                                    style = MaterialTheme.typography.labelSmall,&#10;                                    color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                                )&#10;                                Text(&#10;                                    text = &quot;S/ %.2f&quot;.format(equip.pricePerMonth),&#10;                                    style = MaterialTheme.typography.titleLarge,&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;&#10;                    HorizontalDivider()&#10;&#10;                    // Sección de meses de renta&#10;                    Card(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.surfaceContainerLow&#10;                        ),&#10;                        shape = RoundedCornerShape(16.dp)&#10;                    ) {&#10;                        Row(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(16.dp),&#10;                            horizontalArrangement = Arrangement.SpaceBetween,&#10;                            verticalAlignment = Alignment.CenterVertically&#10;                        ) {&#10;                            Column {&#10;                                Text(&#10;                                    text = &quot;Duración de Renta&quot;,&#10;                                    style = MaterialTheme.typography.titleMedium,&#10;                                    fontWeight = FontWeight.SemiBold,&#10;                                    color = MaterialTheme.colorScheme.onSurface&#10;                                )&#10;                                Text(&#10;                                    text = &quot;S/ ${String.format(java.util.Locale.getDefault(), &quot;%.2f&quot;, equip.pricePerMonth)}/mes&quot;,&#10;                                    style = MaterialTheme.typography.bodySmall,&#10;                                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                                )&#10;                            }&#10;&#10;                            Row(&#10;                                verticalAlignment = Alignment.CenterVertically,&#10;                                horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                            ) {&#10;                                // Botón decrementar&#10;                                FilledIconButton(&#10;                                    onClick = { if (rentalMonths &gt; 1) rentalMonths-- },&#10;                                    modifier = Modifier.size(40.dp),&#10;                                    colors = IconButtonDefaults.filledIconButtonColors(&#10;                                        containerColor = MaterialTheme.colorScheme.secondaryContainer,&#10;                                        contentColor = MaterialTheme.colorScheme.onSecondaryContainer&#10;                                    )&#10;                                ) {&#10;                                    Icon(&#10;                                        Icons.Default.Remove,&#10;                                        contentDescription = &quot;Disminuir&quot;,&#10;                                        modifier = Modifier.size(20.dp)&#10;                                    )&#10;                                }&#10;&#10;                                // Meses&#10;                                Surface(&#10;                                    shape = RoundedCornerShape(8.dp),&#10;                                    color = MaterialTheme.colorScheme.surface,&#10;                                    modifier = Modifier.width(80.dp)&#10;                                ) {&#10;                                    Column(&#10;                                        modifier = Modifier.padding(vertical = 8.dp, horizontal = 4.dp),&#10;                                        horizontalAlignment = Alignment.CenterHorizontally&#10;                                    ) {&#10;                                        Text(&#10;                                            text = rentalMonths.toString(),&#10;                                            style = MaterialTheme.typography.titleLarge,&#10;                                            fontWeight = FontWeight.Bold,&#10;                                            color = MaterialTheme.colorScheme.onSurface&#10;                                        )&#10;                                        Text(&#10;                                            text = if (rentalMonths == 1) &quot;mes&quot; else &quot;meses&quot;,&#10;                                            style = MaterialTheme.typography.labelSmall,&#10;                                            color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                                        )&#10;                                    }&#10;                                }&#10;&#10;                                // Botón incrementar&#10;                                FilledIconButton(&#10;                                    onClick = { rentalMonths++ },&#10;                                    modifier = Modifier.size(40.dp),&#10;                                    colors = IconButtonDefaults.filledIconButtonColors(&#10;                                        containerColor = MaterialTheme.colorScheme.primary,&#10;                                        contentColor = MaterialTheme.colorScheme.onPrimary&#10;                                    )&#10;                                ) {&#10;                                    Icon(&#10;                                        Icons.Default.Add,&#10;                                        contentDescription = &quot;Aumentar&quot;,&#10;                                        modifier = Modifier.size(20.dp)&#10;                                    )&#10;                                }&#10;                            }&#10;                        }&#10;                    }&#10;&#10;                    // Información del producto&#10;                    Card(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.surfaceContainerLow&#10;                        ),&#10;                        shape = RoundedCornerShape(16.dp)&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(16.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;Detalles del Producto&quot;,&#10;                                style = MaterialTheme.typography.titleMedium,&#10;                                fontWeight = FontWeight.SemiBold,&#10;                                color = MaterialTheme.colorScheme.onSurface&#10;                            )&#10;&#10;                            DetailRow(&#10;                                icon = Icons.Default.Category,&#10;                                label = &quot;Categoría&quot;,&#10;                                value = equip.category&#10;                            )&#10;&#10;                            DetailRow(&#10;                                icon = Icons.Default.Inventory,&#10;                                label = &quot;Stock&quot;,&#10;                                value = if (equip.available) &quot;Disponible&quot; else &quot;No disponible&quot;&#10;                            )&#10;&#10;                            DetailRow(&#10;                                icon = Icons.Default.LocalShipping,&#10;                                label = &quot;Ubicación&quot;,&#10;                                value = equip.location ?: &quot;Lima, Perú&quot;&#10;                            )&#10;&#10;                            DetailRow(&#10;                                icon = Icons.Default.Verified,&#10;                                label = &quot;Marca&quot;,&#10;                                value = equip.brand ?: &quot;N/A&quot;&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    // Resumen de renta&#10;                    Card(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = MaterialTheme.colorScheme.tertiaryContainer&#10;                        ),&#10;                        shape = RoundedCornerShape(16.dp)&#10;                    ) {&#10;                        Column(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(16.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(8.dp)&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;Resumen de Renta&quot;,&#10;                                style = MaterialTheme.typography.titleMedium,&#10;                                fontWeight = FontWeight.SemiBold,&#10;                                color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                            )&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween&#10;                            ) {&#10;                                Text(&#10;                                    text = &quot;Precio por mes&quot;,&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                                Text(&#10;                                    text = &quot;S/ %.2f&quot;.format(equip.pricePerMonth),&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    fontWeight = FontWeight.Medium,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                            }&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween&#10;                            ) {&#10;                                Text(&#10;                                    text = &quot;Duración&quot;,&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                                Text(&#10;                                    text = &quot;$rentalMonths ${if (rentalMonths == 1) &quot;mes&quot; else &quot;meses&quot;}&quot;,&#10;                                    style = MaterialTheme.typography.bodyMedium,&#10;                                    fontWeight = FontWeight.Medium,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                            }&#10;&#10;                            HorizontalDivider(&#10;                                color = MaterialTheme.colorScheme.onTertiaryContainer.copy(alpha = 0.3f)&#10;                            )&#10;&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.SpaceBetween,&#10;                                verticalAlignment = Alignment.Bottom&#10;                            ) {&#10;                                Column {&#10;                                    Text(&#10;                                        text = &quot;Total a Pagar&quot;,&#10;                                        style = MaterialTheme.typography.titleLarge,&#10;                                        fontWeight = FontWeight.Bold,&#10;                                        color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                    )&#10;                                    Text(&#10;                                        text = &quot;Por $rentalMonths ${if (rentalMonths == 1) &quot;mes&quot; else &quot;meses&quot;}&quot;,&#10;                                        style = MaterialTheme.typography.bodySmall,&#10;                                        color = MaterialTheme.colorScheme.onTertiaryContainer.copy(alpha = 0.7f)&#10;                                    )&#10;                                }&#10;                                Text(&#10;                                    text = &quot;S/ %.2f&quot;.format(equip.pricePerMonth * rentalMonths),&#10;                                    style = MaterialTheme.typography.headlineMedium,&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    color = MaterialTheme.colorScheme.onTertiaryContainer&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;&#10;                    // Espacio para el FAB&#10;                    Spacer(modifier = Modifier.height(80.dp))&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun DetailRow(&#10;    icon: androidx.compose.ui.graphics.vector.ImageVector,&#10;    label: String,&#10;    value: String&#10;) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Icon(&#10;            icon,&#10;            contentDescription = null,&#10;            modifier = Modifier.size(20.dp),&#10;            tint = MaterialTheme.colorScheme.primary&#10;        )&#10;        Column(modifier = Modifier.weight(1f)) {&#10;            Text(&#10;                text = label,&#10;                style = MaterialTheme.typography.labelMedium,&#10;                color = MaterialTheme.colorScheme.onSurfaceVariant&#10;            )&#10;            Text(&#10;                text = value,&#10;                style = MaterialTheme.typography.bodyMedium,&#10;                fontWeight = FontWeight.Medium,&#10;                color = MaterialTheme.colorScheme.onSurface&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun RentalDialog(&#10;    equipmentName: String,&#10;    pricePerMonth: Double,&#10;    rentalMonths: Int,&#10;    onRentalMonthsChange: (Int) -&gt; Unit,&#10;    onConfirm: () -&gt; Unit,&#10;    onDismiss: () -&gt; Unit,&#10;    isLoading: Boolean&#10;) {&#10;    AlertDialog(&#10;        onDismissRequest = { if (!isLoading) onDismiss() },&#10;        icon = {&#10;            Icon(&#10;                Icons.Default.CalendarMonth,&#10;                contentDescription = null,&#10;                tint = MaterialTheme.colorScheme.primary,&#10;                modifier = Modifier.size(32.dp)&#10;            )&#10;        },&#10;        title = {&#10;            Text(&#10;                text = &quot;Confirmar Renta&quot;,&#10;                style = MaterialTheme.typography.titleLarge,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;        },&#10;        text = {&#10;            Column(&#10;                verticalArrangement = Arrangement.spacedBy(16.dp)&#10;            ) {&#10;                Text(&#10;                    text = equipmentName,&#10;                    style = MaterialTheme.typography.bodyLarge,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;&#10;                HorizontalDivider()&#10;&#10;                // Selector de meses&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Text(&#10;                        text = &quot;Duración:&quot;,&#10;                        style = MaterialTheme.typography.bodyMedium&#10;                    )&#10;&#10;                    Row(&#10;                        verticalAlignment = Alignment.CenterVertically,&#10;                        horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                    ) {&#10;                        IconButton(&#10;                            onClick = { if (rentalMonths &gt; 1) onRentalMonthsChange(rentalMonths - 1) },&#10;                            enabled = !isLoading &amp;&amp; rentalMonths &gt; 1&#10;                        ) {&#10;                            Icon(Icons.Default.Remove, contentDescription = &quot;Disminuir&quot;)&#10;                        }&#10;&#10;                        Surface(&#10;                            shape = RoundedCornerShape(8.dp),&#10;                            color = MaterialTheme.colorScheme.surfaceContainerHighest,&#10;                            modifier = Modifier.widthIn(min = 60.dp)&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;$rentalMonths ${if (rentalMonths == 1) &quot;mes&quot; else &quot;meses&quot;}&quot;,&#10;                                style = MaterialTheme.typography.titleMedium,&#10;                                fontWeight = FontWeight.Bold,&#10;                                modifier = Modifier.padding(horizontal = 12.dp, vertical = 8.dp),&#10;                                textAlign = androidx.compose.ui.text.style.TextAlign.Center&#10;                            )&#10;                        }&#10;&#10;                        IconButton(&#10;                            onClick = { onRentalMonthsChange(rentalMonths + 1) },&#10;                            enabled = !isLoading&#10;                        ) {&#10;                            Icon(Icons.Default.Add, contentDescription = &quot;Aumentar&quot;)&#10;                        }&#10;                    }&#10;                }&#10;&#10;                // Resumen&#10;                Card(&#10;                    colors = CardDefaults.cardColors(&#10;                        containerColor = MaterialTheme.colorScheme.primaryContainer&#10;                    ),&#10;                    shape = RoundedCornerShape(12.dp)&#10;                ) {&#10;                    Column(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .padding(12.dp),&#10;                        verticalArrangement = Arrangement.spacedBy(8.dp)&#10;                    ) {&#10;                        Row(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalArrangement = Arrangement.SpaceBetween&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;Precio/mes:&quot;,&#10;                                style = MaterialTheme.typography.bodyMedium,&#10;                                color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                            )&#10;                            Text(&#10;                                text = &quot;S/ %.2f&quot;.format(pricePerMonth),&#10;                                style = MaterialTheme.typography.bodyMedium,&#10;                                fontWeight = FontWeight.Medium,&#10;                                color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                            )&#10;                        }&#10;&#10;                        HorizontalDivider(&#10;                            color = MaterialTheme.colorScheme.onPrimaryContainer.copy(alpha = 0.3f)&#10;                        )&#10;&#10;                        Row(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalArrangement = Arrangement.SpaceBetween,&#10;                            verticalAlignment = Alignment.Bottom&#10;                        ) {&#10;                            Text(&#10;                                text = &quot;Total:&quot;,&#10;                                style = MaterialTheme.typography.titleMedium,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                            )&#10;                            Text(&#10;                                text = &quot;S/ %.2f&quot;.format(pricePerMonth * rentalMonths),&#10;                                style = MaterialTheme.typography.titleLarge,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = MaterialTheme.colorScheme.onPrimaryContainer&#10;                            )&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        },&#10;        confirmButton = {&#10;            Button(&#10;                onClick = onConfirm,&#10;                enabled = !isLoading&#10;            ) {&#10;                if (isLoading) {&#10;                    CircularProgressIndicator(&#10;                        modifier = Modifier.size(20.dp),&#10;                        color = MaterialTheme.colorScheme.onPrimary,&#10;                        strokeWidth = 2.dp&#10;                    )&#10;                    Spacer(modifier = Modifier.width(8.dp))&#10;                }&#10;                Text(if (isLoading) &quot;Procesando...&quot; else &quot;Confirmar Renta&quot;)&#10;            }&#10;        },&#10;        dismissButton = {&#10;            TextButton(&#10;                onClick = onDismiss,&#10;                enabled = !isLoading&#10;            ) {&#10;                Text(&quot;Cancelar&quot;)&#10;            }&#10;        }&#10;    )&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/home/presentation/equipmentdetail/EquipmentDetailViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/home/presentation/equipmentdetail/EquipmentDetailViewModel.kt" />
              <option name="originalContent" value="package pe.edu.upc.polarnet.features.client.home.presentation.equipmentdetail&#10;&#10;import android.util.Log&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import dagger.hilt.android.lifecycle.HiltViewModel&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.launch&#10;import pe.edu.upc.polarnet.features.client.home.domain.repositories.EquipmentRepository&#10;import pe.edu.upc.polarnet.features.client.rental.domain.repositories.RentalRepository&#10;import pe.edu.upc.polarnet.shared.models.Equipment&#10;import pe.edu.upc.polarnet.shared.models.RequestType&#10;import pe.edu.upc.polarnet.shared.models.ServiceRequest&#10;import javax.inject.Inject&#10;&#10;@HiltViewModel&#10;class EquipmentDetailViewModel @Inject constructor(&#10;    private val equipmentRepository: EquipmentRepository,&#10;    private val rentalRepository: RentalRepository&#10;) : ViewModel() {&#10;&#10;    private val _equipment = MutableStateFlow&lt;Equipment?&gt;(null)&#10;    val equipment: StateFlow&lt;Equipment?&gt; = _equipment&#10;&#10;    private val _isLoading = MutableStateFlow(false)&#10;    val isLoading: StateFlow&lt;Boolean&gt; = _isLoading&#10;&#10;    private val _rentalSuccess = MutableStateFlow(false)&#10;    val rentalSuccess: StateFlow&lt;Boolean&gt; = _rentalSuccess&#10;&#10;    private val _errorMessage = MutableStateFlow&lt;String?&gt;(null)&#10;    val errorMessage: StateFlow&lt;String?&gt; = _errorMessage&#10;&#10;    fun getEquipmentById(id: Long) {&#10;        viewModelScope.launch {&#10;            _equipment.value = equipmentRepository.getEquipmentById(id)&#10;        }&#10;    }&#10;&#10;    fun createRentalRequest(&#10;        clientId: Long,&#10;        equipmentId: Long,&#10;        rentalMonths: Int,&#10;        pricePerMonth: Double&#10;    ) {&#10;        viewModelScope.launch {&#10;            try {&#10;                _isLoading.value = true&#10;                _errorMessage.value = null&#10;                _rentalSuccess.value = false&#10;&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot;Creando solicitud de renta...&quot;)&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot;Cliente: $clientId, Equipo: $equipmentId&quot;)&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot;Meses: $rentalMonths, Precio/mes: $pricePerMonth&quot;)&#10;&#10;                // Usar SimpleDateFormat compatible con API 24&#10;                val formatter = java.text.SimpleDateFormat(&quot;yyyy-MM-dd&quot;, java.util.Locale.getDefault())&#10;                val calendar = java.util.Calendar.getInstance()&#10;                val startDate = formatter.format(calendar.time)&#10;&#10;                calendar.add(java.util.Calendar.MONTH, rentalMonths)&#10;                val endDate = formatter.format(calendar.time)&#10;&#10;                val totalPrice = pricePerMonth * rentalMonths&#10;&#10;                val serviceRequest = ServiceRequest(&#10;                    id = 0,&#10;                    clientId = clientId,&#10;                    equipmentId = equipmentId,&#10;                    requestType = &quot;rental&quot;,&#10;                    description = &quot;Solicitud de renta por $rentalMonths mes(es)&quot;,&#10;                    startDate = startDate,&#10;                    endDate = endDate,&#10;                    status = &quot;pending&quot;,&#10;                    totalPrice = totalPrice,&#10;                    notes = &quot;Solicitud creada desde la aplicación móvil&quot;,&#10;                    createdAt = null,&#10;                    equipment = null,&#10;                    client = null&#10;                )&#10;&#10;                val result = rentalRepository.createRentalRequest(serviceRequest)&#10;&#10;                result.onSuccess { createdRequest -&gt;&#10;                    Log.d(&quot;EquipmentDetailVM&quot;, &quot;✅ Solicitud creada exitosamente: ID ${createdRequest.id}&quot;)&#10;                    _rentalSuccess.value = true&#10;                }.onFailure { exception -&gt;&#10;                    Log.e(&quot;EquipmentDetailVM&quot;, &quot;❌ Error al crear solicitud: ${exception.message}&quot;)&#10;                    _errorMessage.value = exception.message ?: &quot;Error desconocido&quot;&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;EquipmentDetailVM&quot;, &quot;❌ Excepción: ${e.message}&quot;, e)&#10;                _errorMessage.value = e.message ?: &quot;Error al crear solicitud&quot;&#10;            } finally {&#10;                _isLoading.value = false&#10;            }&#10;        }&#10;    }&#10;&#10;    fun resetRentalState() {&#10;        _rentalSuccess.value = false&#10;        _errorMessage.value = null&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.client.home.presentation.equipmentdetail&#10;&#10;import android.util.Log&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import dagger.hilt.android.lifecycle.HiltViewModel&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.launch&#10;import pe.edu.upc.polarnet.features.client.home.domain.repositories.EquipmentRepository&#10;import pe.edu.upc.polarnet.features.client.rental.domain.repositories.RentalRepository&#10;import pe.edu.upc.polarnet.shared.models.Equipment&#10;import pe.edu.upc.polarnet.shared.models.ServiceRequest&#10;import javax.inject.Inject&#10;&#10;@HiltViewModel&#10;class EquipmentDetailViewModel @Inject constructor(&#10;    private val equipmentRepository: EquipmentRepository,&#10;    private val rentalRepository: RentalRepository&#10;) : ViewModel() {&#10;&#10;    private val _equipment = MutableStateFlow&lt;Equipment?&gt;(null)&#10;    val equipment: StateFlow&lt;Equipment?&gt; = _equipment&#10;&#10;    private val _isLoading = MutableStateFlow(false)&#10;    val isLoading: StateFlow&lt;Boolean&gt; = _isLoading&#10;&#10;    private val _rentalSuccess = MutableStateFlow(false)&#10;    val rentalSuccess: StateFlow&lt;Boolean&gt; = _rentalSuccess&#10;&#10;    private val _errorMessage = MutableStateFlow&lt;String?&gt;(null)&#10;    val errorMessage: StateFlow&lt;String?&gt; = _errorMessage&#10;&#10;    fun getEquipmentById(id: Long) {&#10;        viewModelScope.launch {&#10;            _equipment.value = equipmentRepository.getEquipmentById(id)&#10;        }&#10;    }&#10;&#10;    fun createRentalRequest(&#10;        clientId: Long,&#10;        equipmentId: Long,&#10;        rentalMonths: Int,&#10;        pricePerMonth: Double&#10;    ) {&#10;        viewModelScope.launch {&#10;            try {&#10;                _isLoading.value = true&#10;                _errorMessage.value = null&#10;                _rentalSuccess.value = false&#10;&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot; CREANDO SOLICITUD DE RENTA&quot;)&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot;====================================&quot;)&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot; Cliente ID: $clientId&quot;)&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot; Equipo ID: $equipmentId&quot;)&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot; Meses: $rentalMonths&quot;)&#10;                Log.d(&quot;EquipmentDetailVM&quot;, &quot; Precio/mes: $pricePerMonth&quot;)&#10;&#10;                // Usar SimpleDateFormat compatible con API 24&#10;                val formatter = java.text.SimpleDateFormat(&quot;yyyy-MM-dd&quot;, java.util.Locale.getDefault())&#10;                val calendar = java.util.Calendar.getInstance()&#10;                val startDate = formatter.format(calendar.time)&#10;&#10;                calendar.add(java.util.Calendar.MONTH, rentalMonths)&#10;                val endDate = formatter.format(calendar.time)&#10;&#10;                val totalPrice = pricePerMonth * rentalMonths&#10;&#10;                val serviceRequest = ServiceRequest(&#10;                    id = 0,&#10;                    clientId = clientId,&#10;                    equipmentId = equipmentId,&#10;                    requestType = &quot;rental&quot;,&#10;                    description = &quot;Solicitud de renta por $rentalMonths mes(es)&quot;,&#10;                    startDate = startDate,&#10;                    endDate = endDate,&#10;                    status = &quot;pending&quot;,&#10;                    totalPrice = totalPrice,&#10;                    notes = &quot;Solicitud creada desde la aplicación móvil&quot;,&#10;                    createdAt = null,&#10;                    equipment = null,&#10;                    client = null&#10;                )&#10;&#10;                val result = rentalRepository.createRentalRequest(serviceRequest)&#10;&#10;                result.onSuccess { createdRequest -&gt;&#10;                    Log.d(&quot;EquipmentDetailVM&quot;, &quot;✅ Solicitud creada exitosamente: ID ${createdRequest.id}&quot;)&#10;                    _rentalSuccess.value = true&#10;                }.onFailure { exception -&gt;&#10;                    Log.e(&quot;EquipmentDetailVM&quot;, &quot;❌ Error al crear solicitud: ${exception.message}&quot;)&#10;                    _errorMessage.value = exception.message ?: &quot;Error desconocido&quot;&#10;                }&#10;            } catch (e: Exception) {&#10;                Log.e(&quot;EquipmentDetailVM&quot;, &quot;❌ Excepción: ${e.message}&quot;, e)&#10;                _errorMessage.value = e.message ?: &quot;Error al crear solicitud&quot;&#10;            } finally {&#10;                _isLoading.value = false&#10;            }&#10;        }&#10;    }&#10;&#10;    fun resetRentalState() {&#10;        _rentalSuccess.value = false&#10;        _errorMessage.value = null&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/data/remote/di/RentalServiceModule.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/data/remote/di/RentalServiceModule.kt" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.client.rental.data.remote.di&#10;&#10;import dagger.Module&#10;import dagger.Provides&#10;import dagger.hilt.InstallIn&#10;import dagger.hilt.components.SingletonComponent&#10;import pe.edu.upc.polarnet.features.client.rental.data.remote.services.RentalService&#10;import retrofit2.Retrofit&#10;import javax.inject.Singleton&#10;&#10;@Module&#10;@InstallIn(SingletonComponent::class)&#10;object RentalServiceModule {&#10;    &#10;    @Provides&#10;    @Singleton&#10;    fun provideRentalService(retrofit: Retrofit): RentalService {&#10;        return retrofit.create(RentalService::class.java)&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/data/remote/models/ServiceRequestDto.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/data/remote/models/ServiceRequestDto.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.client.rental.data.remote.models&#10;&#10;import com.google.gson.annotations.SerializedName&#10;&#10;data class ServiceRequestDto(&#10;    @SerializedName(&quot;id&quot;)&#10;    val id: Long = 0,&#10;&#10;    @SerializedName(&quot;client_id&quot;)&#10;    val clientId: Long,&#10;&#10;    @SerializedName(&quot;equipment_id&quot;)&#10;    val equipmentId: Long,&#10;&#10;    @SerializedName(&quot;request_type&quot;)&#10;    val requestType: String,&#10;&#10;    @SerializedName(&quot;description&quot;)&#10;    val description: String? = null,&#10;&#10;    @SerializedName(&quot;start_date&quot;)&#10;    val startDate: String,&#10;&#10;    @SerializedName(&quot;end_date&quot;)&#10;    val endDate: String? = null,&#10;&#10;    @SerializedName(&quot;status&quot;)&#10;    val status: String = &quot;pending&quot;,&#10;&#10;    @SerializedName(&quot;total_price&quot;)&#10;    val totalPrice: Double,&#10;&#10;    @SerializedName(&quot;notes&quot;)&#10;    val notes: String? = null,&#10;&#10;    @SerializedName(&quot;created_at&quot;)&#10;    val createdAt: String? = null&#10;)&#10;&#10;data class CreateServiceRequestDto(&#10;    @SerializedName(&quot;client_id&quot;)&#10;    val clientId: Long,&#10;&#10;    @SerializedName(&quot;equipment_id&quot;)&#10;    val equipmentId: Long,&#10;&#10;    @SerializedName(&quot;request_type&quot;)&#10;    val requestType: String,&#10;&#10;    @SerializedName(&quot;description&quot;)&#10;    val description: String? = null,&#10;&#10;    @SerializedName(&quot;start_date&quot;)&#10;    val startDate: String,&#10;&#10;    @SerializedName(&quot;end_date&quot;)&#10;    val endDate: String? = null,&#10;&#10;    @SerializedName(&quot;total_price&quot;)&#10;    val totalPrice: Double,&#10;&#10;    @SerializedName(&quot;notes&quot;)&#10;    val notes: String? = null&#10;)&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/data/remote/services/RentalService.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/data/remote/services/RentalService.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.client.rental.data.remote.services&#10;&#10;import pe.edu.upc.polarnet.features.client.rental.data.remote.models.CreateServiceRequestDto&#10;import pe.edu.upc.polarnet.features.client.rental.data.remote.models.ServiceRequestDto&#10;import retrofit2.Response&#10;import retrofit2.http.Body&#10;import retrofit2.http.GET&#10;import retrofit2.http.Header&#10;import retrofit2.http.POST&#10;import retrofit2.http.Query&#10;&#10;interface RentalService {&#10;    &#10;    @POST(&quot;/rest/v1/service_requests&quot;)&#10;    suspend fun createRentalRequest(&#10;        @Body request: CreateServiceRequestDto,&#10;        @Header(&quot;Prefer&quot;) prefer: String = &quot;return=representation&quot;&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;&#10;    @GET(&quot;/rest/v1/service_requests&quot;)&#10;    suspend fun getRentalRequestsByClient(&#10;        @Query(&quot;client_id&quot;) clientId: String&#10;    ): Response&lt;List&lt;ServiceRequestDto&gt;&gt;&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/data/repositories/RentalRepositoryImpl.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/data/repositories/RentalRepositoryImpl.kt" />
              <option name="originalContent" value="package pe.edu.upc.polarnet.features.client.rental.data.repositories&#10;&#10;import android.util.Log&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import pe.edu.upc.polarnet.features.client.rental.data.remote.models.CreateServiceRequestDto&#10;import pe.edu.upc.polarnet.features.client.rental.data.remote.services.RentalService&#10;import pe.edu.upc.polarnet.features.client.rental.domain.repositories.RentalRepository&#10;import pe.edu.upc.polarnet.shared.models.ServiceRequest&#10;import javax.inject.Inject&#10;&#10;class RentalRepositoryImpl @Inject constructor(&#10;    private val service: RentalService&#10;) : RentalRepository {&#10;&#10;    override suspend fun createRentalRequest(serviceRequest: ServiceRequest): Result&lt;ServiceRequest&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            Log.d(&quot;RentalRepo&quot;, &quot;Creando solicitud de renta: ${serviceRequest.equipmentId}&quot;)&#10;&#10;            val requestDto = CreateServiceRequestDto(&#10;                clientId = serviceRequest.clientId,&#10;                equipmentId = serviceRequest.equipmentId,&#10;                requestType = serviceRequest.requestType,&#10;                description = serviceRequest.description,&#10;                startDate = serviceRequest.startDate ?: &quot;&quot;,&#10;                endDate = serviceRequest.endDate,&#10;                totalPrice = serviceRequest.totalPrice,&#10;                notes = serviceRequest.notes&#10;            )&#10;&#10;            val response = service.createRentalRequest(requestDto)&#10;&#10;            if (response.isSuccessful) {&#10;                val dto = response.body()&#10;                if (dto != null) {&#10;                    Log.d(&quot;RentalRepo&quot;, &quot;Solicitud creada exitosamente: ID ${dto.id}&quot;)&#10;&#10;                    val createdRequest = ServiceRequest(&#10;                        id = dto.id,&#10;                        clientId = dto.clientId,&#10;                        equipmentId = dto.equipmentId,&#10;                        requestType = dto.requestType,&#10;                        description = dto.description,&#10;                        startDate = dto.startDate,&#10;                        endDate = dto.endDate,&#10;                        status = dto.status,&#10;                        totalPrice = dto.totalPrice,&#10;                        notes = dto.notes,&#10;                        createdAt = dto.createdAt,&#10;                        equipment = null,&#10;                        client = null&#10;                    )&#10;&#10;                    return@withContext Result.success(createdRequest)&#10;                } else {&#10;                    Log.e(&quot;RentalRepo&quot;, &quot;Body vacío en la respuesta&quot;)&#10;                    return@withContext Result.failure(Exception(&quot;Error: Respuesta vacía del servidor&quot;))&#10;                }&#10;            } else {&#10;                val errorBody = response.errorBody()?.string()&#10;                Log.e(&quot;RentalRepo&quot;, &quot;Error ${response.code()}: $errorBody&quot;)&#10;                return@withContext Result.failure(Exception(&quot;Error al crear solicitud: ${response.code()}&quot;))&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(&quot;RentalRepo&quot;, &quot;Excepción al crear solicitud: ${e.message}&quot;, e)&#10;            return@withContext Result.failure(e)&#10;        }&#10;    }&#10;&#10;    override suspend fun getRentalRequestsByClient(clientId: Long): Result&lt;List&lt;ServiceRequest&gt;&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            Log.d(&quot;RentalRepo&quot;, &quot;Obteniendo solicitudes del cliente: $clientId&quot;)&#10;&#10;            val response = service.getRentalRequestsByClient(&quot;eq.$clientId&quot;)&#10;&#10;            if (response.isSuccessful) {&#10;                val requests = response.body()?.map { dto -&gt;&#10;                    ServiceRequest(&#10;                        id = dto.id,&#10;                        clientId = dto.clientId,&#10;                        equipmentId = dto.equipmentId,&#10;                        requestType = dto.requestType,&#10;                        description = dto.description,&#10;                        startDate = dto.startDate,&#10;                        endDate = dto.endDate,&#10;                        status = dto.status,&#10;                        totalPrice = dto.totalPrice,&#10;                        notes = dto.notes,&#10;                        createdAt = dto.createdAt,&#10;                        equipment = null,&#10;                        client = null&#10;                    )&#10;                } ?: emptyList()&#10;&#10;                Log.d(&quot;RentalRepo&quot;, &quot;Solicitudes obtenidas: ${requests.size}&quot;)&#10;                return@withContext Result.success(requests)&#10;            } else {&#10;                Log.e(&quot;RentalRepo&quot;, &quot;Error ${response.code()}: ${response.errorBody()?.string()}&quot;)&#10;                return@withContext Result.failure(Exception(&quot;Error al obtener solicitudes&quot;))&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(&quot;RentalRepo&quot;, &quot;Excepción: ${e.message}&quot;, e)&#10;            return@withContext Result.failure(e)&#10;        }&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.client.rental.data.repositories&#10;&#10;import android.util.Log&#10;import kotlinx.coroutines.Dispatchers&#10;import kotlinx.coroutines.withContext&#10;import pe.edu.upc.polarnet.features.client.rental.data.remote.models.CreateServiceRequestDto&#10;import pe.edu.upc.polarnet.features.client.rental.data.remote.services.RentalService&#10;import pe.edu.upc.polarnet.features.client.rental.domain.repositories.RentalRepository&#10;import pe.edu.upc.polarnet.shared.models.ServiceRequest&#10;import javax.inject.Inject&#10;&#10;class RentalRepositoryImpl @Inject constructor(&#10;    private val service: RentalService&#10;) : RentalRepository {&#10;&#10;    override suspend fun createRentalRequest(serviceRequest: ServiceRequest): Result&lt;ServiceRequest&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            Log.d(&quot;RentalRepo&quot;, &quot;====================================&quot;)&#10;            Log.d(&quot;RentalRepo&quot;, &quot; ENVIANDO SOLICITUD A SUPABASE&quot;)&#10;            Log.d(&quot;RentalRepo&quot;, &quot;====================================&quot;)&#10;            Log.d(&quot;RentalRepo&quot;, &quot; client_id: ${serviceRequest.clientId}&quot;)&#10;            Log.d(&quot;RentalRepo&quot;, &quot; equipment_id: ${serviceRequest.equipmentId}&quot;)&#10;            Log.d(&quot;RentalRepo&quot;, &quot; request_type: ${serviceRequest.requestType}&quot;)&#10;            Log.d(&quot;RentalRepo&quot;, &quot; total_price: ${serviceRequest.totalPrice}&quot;)&#10;            Log.d(&quot;RentalRepo&quot;, &quot; start_date: ${serviceRequest.startDate}&quot;)&#10;            Log.d(&quot;RentalRepo&quot;, &quot; end_date: ${serviceRequest.endDate}&quot;)&#10;            &#10;            val requestDto = CreateServiceRequestDto(&#10;                clientId = serviceRequest.clientId,&#10;                equipmentId = serviceRequest.equipmentId,&#10;                requestType = serviceRequest.requestType,&#10;                description = serviceRequest.description,&#10;                startDate = serviceRequest.startDate ?: &quot;&quot;,&#10;                endDate = serviceRequest.endDate,&#10;                totalPrice = serviceRequest.totalPrice,&#10;                notes = serviceRequest.notes&#10;            )&#10;            &#10;            Log.d(&quot;RentalRepo&quot;, &quot; DTO creado con client_id: ${requestDto.clientId}&quot;)&#10;&#10;            val response = service.createRentalRequest(requestDto)&#10;&#10;            if (response.isSuccessful) {&#10;                val dtoList = response.body()&#10;                if (!dtoList.isNullOrEmpty()) {&#10;                    val dto = dtoList[0] // Supabase devuelve un array con 1 elemento&#10;                    Log.d(&quot;RentalRepo&quot;, &quot;Solicitud creada exitosamente: ID ${dto.id}&quot;)&#10;&#10;                    val createdRequest = ServiceRequest(&#10;                        id = dto.id,&#10;                        clientId = dto.clientId,&#10;                        equipmentId = dto.equipmentId,&#10;                        requestType = dto.requestType,&#10;                        description = dto.description,&#10;                        startDate = dto.startDate,&#10;                        endDate = dto.endDate,&#10;                        status = dto.status,&#10;                        totalPrice = dto.totalPrice,&#10;                        notes = dto.notes,&#10;                        createdAt = dto.createdAt,&#10;                        equipment = null,&#10;                        client = null&#10;                    )&#10;&#10;                    return@withContext Result.success(createdRequest)&#10;                } else {&#10;                    Log.e(&quot;RentalRepo&quot;, &quot;Body vacío en la respuesta&quot;)&#10;                    return@withContext Result.failure(Exception(&quot;Error: Respuesta vacía del servidor&quot;))&#10;                }&#10;            } else {&#10;                val errorBody = response.errorBody()?.string()&#10;                Log.e(&quot;RentalRepo&quot;, &quot;Error ${response.code()}: $errorBody&quot;)&#10;                return@withContext Result.failure(Exception(&quot;Error al crear solicitud: ${response.code()}&quot;))&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(&quot;RentalRepo&quot;, &quot;Excepción al crear solicitud: ${e.message}&quot;, e)&#10;            return@withContext Result.failure(e)&#10;        }&#10;    }&#10;&#10;    override suspend fun getRentalRequestsByClient(clientId: Long): Result&lt;List&lt;ServiceRequest&gt;&gt; = withContext(Dispatchers.IO) {&#10;        try {&#10;            Log.d(&quot;RentalRepo&quot;, &quot;Obteniendo solicitudes del cliente: $clientId&quot;)&#10;&#10;            val response = service.getRentalRequestsByClient(&quot;eq.$clientId&quot;)&#10;&#10;            if (response.isSuccessful) {&#10;                val requests = response.body()?.map { dto -&gt;&#10;                    ServiceRequest(&#10;                        id = dto.id,&#10;                        clientId = dto.clientId,&#10;                        equipmentId = dto.equipmentId,&#10;                        requestType = dto.requestType,&#10;                        description = dto.description,&#10;                        startDate = dto.startDate,&#10;                        endDate = dto.endDate,&#10;                        status = dto.status,&#10;                        totalPrice = dto.totalPrice,&#10;                        notes = dto.notes,&#10;                        createdAt = dto.createdAt,&#10;                        equipment = null,&#10;                        client = null&#10;                    )&#10;                } ?: emptyList()&#10;&#10;                Log.d(&quot;RentalRepo&quot;, &quot;Solicitudes obtenidas: ${requests.size}&quot;)&#10;                return@withContext Result.success(requests)&#10;            } else {&#10;                Log.e(&quot;RentalRepo&quot;, &quot;Error ${response.code()}: ${response.errorBody()?.string()}&quot;)&#10;                return@withContext Result.failure(Exception(&quot;Error al obtener solicitudes&quot;))&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(&quot;RentalRepo&quot;, &quot;Excepción: ${e.message}&quot;, e)&#10;            return@withContext Result.failure(e)&#10;        }&#10;    }&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/domain/di/RentalRepositoryModule.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/domain/di/RentalRepositoryModule.kt" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.client.rental.domain.di&#10;&#10;import dagger.Binds&#10;import dagger.Module&#10;import dagger.hilt.InstallIn&#10;import dagger.hilt.components.SingletonComponent&#10;import pe.edu.upc.polarnet.features.client.rental.data.repositories.RentalRepositoryImpl&#10;import pe.edu.upc.polarnet.features.client.rental.domain.repositories.RentalRepository&#10;import javax.inject.Singleton&#10;&#10;@Module&#10;@InstallIn(SingletonComponent::class)&#10;abstract class RentalRepositoryModule {&#10;    &#10;    @Binds&#10;    @Singleton&#10;    abstract fun bindRentalRepository(&#10;        impl: RentalRepositoryImpl&#10;    ): RentalRepository&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/domain/repositories/RentalRepository.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/features/client/rental/domain/repositories/RentalRepository.kt" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.features.client.rental.domain.repositories&#10;&#10;import pe.edu.upc.polarnet.shared.models.ServiceRequest&#10;&#10;interface RentalRepository {&#10;    suspend fun createRentalRequest(serviceRequest: ServiceRequest): Result&lt;ServiceRequest&gt;&#10;    suspend fun getRentalRequestsByClient(clientId: Long): Result&lt;List&lt;ServiceRequest&gt;&gt;&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/shared/models/ServiceRequest.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/pe/edu/upc/polarnet/shared/models/ServiceRequest.kt" />
              <option name="updatedContent" value="package pe.edu.upc.polarnet.shared.models&#10;&#10;import kotlinx.serialization.Serializable&#10;&#10;@Serializable&#10;data class ServiceRequest(&#10;    val id: Long = 0,&#10;    val clientId: Long,&#10;    val equipmentId: Long,&#10;    val requestType: RequestType,&#10;    val description: String?,&#10;    val startDate: String,&#10;    val endDate: String?,&#10;    val status: RequestStatus = RequestStatus.PENDING,&#10;    val totalPrice: Double,&#10;    val notes: String?,&#10;    val createdAt: String? = null&#10;)&#10;&#10;enum class RequestType {&#10;    RENTAL,&#10;    MAINTENANCE,&#10;    INSTALLATION&#10;}&#10;&#10;enum class RequestStatus {&#10;    PENDING,&#10;    IN_PROGRESS,&#10;    COMPLETED,&#10;    CANCELLED&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>